
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Chinese Word Segmentation &#8212; ENC2045 Computational Linguistics</title>
    
  <link rel="stylesheet" href="../_static/css/index.f658d18f9b420779cfdf24aa0a7e2d77.css">

    
  <link rel="stylesheet"
    href="../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      
  <link rel="stylesheet"
    href="../_static/vendor/open-sans_all/1.44.1/index.css">
  <link rel="stylesheet"
    href="../_static/vendor/lato_latin-ext/1.44.1/index.css">

    
    <link rel="stylesheet" href="../_static/sphinx-book-theme.40e2e510f6b7d1648584402491bb10fe.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../_static/mycss.css" />
    <link rel="stylesheet" type="text/css" href="../_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css" />
    <link rel="stylesheet" type="text/css" href="../_static/panels-variables.06eb56fa6e07937060861dad626602ad.css" />
    
  <link rel="preload" as="script" href="../_static/js/index.d3f166471bb80abb5163.js">

    <script id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/language_data.js"></script>
    <script src="../_static/togglebutton.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script >var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="../_static/sphinx-book-theme.d31b09fe5c1d09cb49b26a786de4a05d.js"></script>
    <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script type="text/x-mathjax-config">MathJax.Hub.Config({"tex2jax": {"inlineMath": [["\\(", "\\)"]], "displayMath": [["\\[", "\\]"]], "processRefs": false, "processEnvironments": false}})</script>
    <script async="async" src="https://unpkg.com/thebelab@latest/lib/index.js"></script>
    <script >
        const thebe_selector = ".thebe"
        const thebe_selector_input = "pre"
        const thebe_selector_output = ".output"
    </script>
    <script async="async" src="../_static/sphinx-thebe.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Google Colab" href="google-colab.html" />
    <link rel="prev" title="Text Enrichment" href="text-enrichment.html" />

    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="en" />



  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    

    <div class="container-xl">
      <div class="row">
          
<div class="col-12 col-md-3 bd-sidebar site-navigation show" id="site-navigation">
    
        <div class="navbar-brand-box">
<a class="navbar-brand text-wrap" href="../index.html">
  
  <img src="../_static/ntnu-word-2.png" class="logo" alt="logo">
  
  
  <h1 class="site-logo" id="site-title">ENC2045 Computational Linguistics</h1>
  
</a>
</div><form class="bd-search d-flex align-items-center" action="../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form>
<nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">
    <p class="caption collapsible-parent">
 <span class="caption-text">
  INTRODUCTION
 </span>
</p>
<ul class="nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference internal" href="nlp-primer.html">
   Natural Language Processing: A Primer
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="nlp-pipeline.html">
   NLP Pipeline
  </a>
 </li>
</ul>
<p class="caption collapsible-parent">
 <span class="caption-text">
  Preprocessing
 </span>
</p>
<ul class="current nav sidenav_l1">
 <li class="toctree-l1 current active collapsible-parent">
  <a class="reference internal" href="text-preprocessing.html">
   Text Preprocessing
  </a>
  <ul class="current collapse-ul">
   <li class="toctree-l2">
    <a class="reference internal" href="text-normalization-eng.html">
     Text Normalization
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="text-tokenization.html">
     Text Tokenization
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="text-enrichment.html">
     Text Enrichment
    </a>
   </li>
   <li class="toctree-l2 current active">
    <a class="current reference internal" href="#">
     Chinese Word Segmentation
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="google-colab.html">
     Google Colab
    </a>
   </li>
  </ul>
  <i class="fas fa-chevron-down">
  </i>
 </li>
</ul>
<p class="caption collapsible-parent">
 <span class="caption-text">
  Text Vectorization
 </span>
</p>
<ul class="nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference internal" href="text-vec-traditional.html">
   Text Vectorization Using Traditional Methods
  </a>
 </li>
</ul>
<p class="caption collapsible-parent">
 <span class="caption-text">
  Machine Learning Basics
 </span>
</p>
<ul class="nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference internal" href="ml-overview.html">
   1. Machine Learning: Overview
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="ml-simple-case.html">
   2. Machine Learning: A Simple Example
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="ml-algorithm.html">
   3. Classification Models
  </a>
 </li>
</ul>
<p class="caption collapsible-parent">
 <span class="caption-text">
  Machine-Learning NLP
 </span>
</p>
<ul class="nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference internal" href="ml-sklearn-classification.html">
   1. Sentiment Analysis Using Bag-of-Words
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="topic-modeling-naive.html">
   2. Topic Modeling: A Naive Example
  </a>
 </li>
</ul>
<p class="caption collapsible-parent">
 <span class="caption-text">
  Deep Learning NLP
 </span>
</p>
<ul class="nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference internal" href="dl-neural-network-from-scratch.html">
   1. Neural Network From Scratch
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="dl-simple-case.html">
   2. Deep Learning: A Simple Example
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="dl-sentiment-case.html">
   3. Deep Learning: Sentiment Analysis
  </a>
 </li>
</ul>
<p class="caption collapsible-parent">
 <span class="caption-text">
  Neural Language Model and Embeddings
 </span>
</p>
<ul class="nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference internal" href="dl-sequence-models-intuition.html">
   1. Sequence Models Intuition
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="dl-neural-language-model-primer.html">
   2. Neural Language Model: A Start
  </a>
 </li>
</ul>
<p class="caption collapsible-parent">
 <span class="caption-text">
  Seq2Seq, Attention, Transformers, and Transfer Learning
 </span>
</p>
<ul class="nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference internal" href="../temp/dl-seq-to-seq-types.html">
   Attention: Intuition
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../temp/dl-seq-to-seq-attention-addition.html">
   Sequence Model with Attention for Addition Learning
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../temp/dl-transformers-intuition.html">
   Transformers: Intuition
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../temp/dl-transformers-keras.html">
   Text Classification with Transformer
  </a>
 </li>
</ul>
<p class="caption collapsible-parent">
 <span class="caption-text">
  Exercises
 </span>
</p>
<ul class="nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference internal" href="../exercise/1-python-basics.html">
   Assignment I: Python Basics
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../exercise/2-journal-review.html">
   Assignment II: Journal Articles Review
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../exercise/3-preprocessing.html">
   Assignment III: Preprocessing
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../exercise/4-chinese-nlp.html">
   Assignment IV: Chinese Language Processing
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../exercise/5-text-vectorization.html">
   Assignment V: Text Vectorization
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../exercise/6-machine-learning.html">
   Assignment VI: Machine Learning
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../exercise/midterm-exam.html">
   Midterm Exam
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../exercise/7-topic-modeling.html">
   Assignment VII: Topic Modeling
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../exercise/8-dl-chinese-name-gender.html">
   Assignment VIII: Deep Learning
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../exercise/9-sentiment-analysis-dl.html">
   Assignment IX: Sentiment Analysis Using Deep Learning
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../exercise/10-neural-language-model.html">
   Assignment X: Neural Language Model
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../exercise/11-word2vec.html">
   Assignment XI: Word Embeddings
  </a>
 </li>
</ul>

</nav> <!-- To handle the deprecated key -->

<div class="navbar_extra_footer">
  <div style="text-align:center">
<i class="fas fa-chalkboard-teacher fa-2x" style="color:Maroon;margin-right:5px"></i><a href="https://alvinntnu.github.io/NTNU_ENC2045/" target='_blank'>ENC2045 Course Website</a><br>
<i class="fas fa-home fa-2x" style="color:Maroon;margin-right:5px"></i><a href="https://alvinchen.myftp.org/" target='_blank'>Alvin Chen's Homepage</a>
</div>

</div>

</div>


          


          
<main class="col py-md-3 pl-md-4 bd-content overflow-auto" role="main">
    
    <div class="row topbar fixed-top container-xl">
    <div class="col-12 col-md-3 bd-topbar-whitespace site-navigation show">
    </div>
    <div class="col pl-2 topbar-main">
        
        <button id="navbar-toggler" class="navbar-toggler ml-0" type="button" data-toggle="collapse"
            data-toggle="tooltip" data-placement="bottom" data-target=".site-navigation" aria-controls="navbar-menu"
            aria-expanded="true" aria-label="Toggle navigation" aria-controls="site-navigation"
            title="Toggle navigation" data-toggle="tooltip" data-placement="left">
            <i class="fas fa-bars"></i>
            <i class="fas fa-arrow-left"></i>
            <i class="fas fa-arrow-up"></i>
        </button>
        
        
<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn" aria-label="Download this page"><i
            class="fas fa-download"></i></button>

    <div class="dropdown-buttons">
        <!-- ipynb file if we had a myst markdown file -->
        
        <!-- Download raw file -->
        <a class="dropdown-buttons" href="../_sources/nlp/chinese-word-seg.ipynb"><button type="button"
                class="btn btn-secondary topbarbtn" title="Download source file" data-toggle="tooltip"
                data-placement="left">.ipynb</button></a>
        <!-- Download PDF via print -->
        <button type="button" id="download-print" class="btn btn-secondary topbarbtn" title="Print to PDF"
            onClick="window.print()" data-toggle="tooltip" data-placement="left">.pdf</button>
    </div>
</div>

        <!-- Source interaction buttons -->


        <!-- Full screen (wrap in <a> to have style consistency -->
        <a class="full-screen-button"><button type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip"
                data-placement="bottom" onclick="toggleFullScreen()" aria-label="Fullscreen mode"
                title="Fullscreen mode"><i
                    class="fas fa-expand"></i></button></a>

        <!-- Launch buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Launch interactive content"><i class="fas fa-rocket"></i></button>
    <div class="dropdown-buttons">
        
        <a class="binder-button" href="https://mybinder.org/v2/gh/alvinntnu/NTNU_ENC2045_LECTURES/main?urlpath=tree/nlp/chinese-word-seg.ipynb"><button type="button"
                class="btn btn-secondary topbarbtn" title="Launch Binder" data-toggle="tooltip"
                data-placement="left"><img class="binder-button-logo"
                    src="../_static/images/logo_binder.svg"
                    alt="Interact on binder">Binder</button></a>
        
        
        
        <a class="colab-button" href="https://colab.research.google.com/github/alvinntnu/NTNU_ENC2045_LECTURES/blob/main/nlp/chinese-word-seg.ipynb"><button type="button" class="btn btn-secondary topbarbtn"
                title="Launch Colab" data-toggle="tooltip" data-placement="left"><img class="colab-button-logo"
                    src="../_static/images/logo_colab.png"
                    alt="Interact on Colab">Colab</button></a>
        
        
    </div>
</div>

    </div>

    <!-- Table of contents -->
    <div class="d-none d-md-block col-md-2 bd-toc show">
        
        <div class="tocsection onthispage pt-5 pb-3">
            <i class="fas fa-list"></i> Contents
        </div>
        <nav id="bd-toc-nav">
            <ul class="nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#segmentation-using-jieba">
   Segmentation using
   <code class="docutils literal notranslate">
    <span class="pre">
     jieba
    </span>
   </code>
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#segmentation-using-ckip-transformer">
   Segmentation using CKIP Transformer
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#challenges-of-word-segmentation">
   Challenges of Word Segmentation
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#other-modules-for-chinese-word-segmentation">
   Other Modules for Chinese Word Segmentation
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#chinese-nlp-using-spacy">
   Chinese NLP Using
   <code class="docutils literal notranslate">
    <span class="pre">
     spacy
    </span>
   </code>
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#visualizing-linguistic-features">
     Visualizing linguistic features
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#conclusion">
   Conclusion
  </a>
 </li>
</ul>

        </nav>
        
    </div>
</div>
    <div id="main-content" class="row">
        <div class="col-12 col-md-9 pl-md-3 pr-md-0">
        
              <div>
                
  <div class="section" id="chinese-word-segmentation">
<h1>Chinese Word Segmentation<a class="headerlink" href="#chinese-word-segmentation" title="Permalink to this headline">¶</a></h1>
<ul class="simple">
<li><p>Natural language processing methods are connected to the characteristics of the target language.</p></li>
<li><p>To deal with the Chinese language, the most intimidating task is to determine a basic <strong>linguistic unit</strong> to work with.</p></li>
<li><p>In this tutorial, we will talk about a few <strong>word segmentation</strong> methods in python.</p></li>
</ul>
<div class="section" id="segmentation-using-jieba">
<h2>Segmentation using <code class="docutils literal notranslate"><span class="pre">jieba</span></code><a class="headerlink" href="#segmentation-using-jieba" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>Before we start, if you haven’t installed the module, please install it as follows:</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ conda activate python-notes
$ pip install jieba
</pre></div>
</div>
<ul class="simple">
<li><p>Check the module documentation for more detail: <a class="reference external" href="https://github.com/fxsjy/jieba"><code class="docutils literal notranslate"><span class="pre">jieba</span></code></a></p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">jieba</span>
<span class="n">text</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;</span>
<span class="s2">高速公路局說，目前在國道3號北向水上系統至中埔路段車多壅塞，已回堵約3公里。另外，國道1號北向仁德至永康路段路段，已回堵約有7公里。建議駕駛人提前避開壅塞路段改道行駛，行經車多路段請保持行車安全距離，小心行駛。</span>
<span class="s2">國道車多壅塞路段還有國1內湖-五堵北向路段、楊梅-新竹南向路段；國3三鶯-關西服務區南向路段、快官-霧峰南向路段、水上系統-中埔北向路段；國6霧峰系統-東草屯東向路段、國10燕巢-燕巢系統東向路段。</span>
<span class="s2">&quot;&quot;&quot;</span>
<span class="n">text_jb</span> <span class="o">=</span> <span class="n">jieba</span><span class="o">.</span><span class="n">lcut</span><span class="p">(</span><span class="n">text</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39; | &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">text_jb</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Building prefix dict from the default dictionary ...
Dumping model to file cache /var/folders/0v/47nxlfjn26536t51wxj9j6q40000gn/T/jieba.cache
Loading model cost 0.696 seconds.
Prefix dict has been built successfully.
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span> | 高速公路 | 局說 | ， | 目前 | 在 | 國道 | 3 | 號 | 北向 | 水上 | 系統 | 至 | 中埔 | 路段 | 車多 | 壅塞 | ， | 已回 | 堵約 | 3 | 公里 | 。 | 另外 | ， | 國道 | 1 | 號 | 北向 | 仁德 | 至 | 永康 | 路段 | 路段 | ， | 已回 | 堵 | 約 | 有 | 7 | 公里 | 。 | 建議 | 駕駛人 | 提前 | 避開 | 壅塞 | 路段 | 改道 | 行駛 | ， | 行經車 | 多 | 路段 | 請 | 保持 | 行車 | 安全 | 距離 | ， | 小心 | 行駛 | 。 | 
 | 國道 | 車多 | 壅塞 | 路段 | 還有國 | 1 | 內湖 | - | 五堵 | 北向 | 路段 | 、 | 楊梅 | - | 新竹 | 南向 | 路段 | ； | 國 | 3 | 三鶯 | - | 關 | 西服 | 務區 | 南向 | 路段 | 、 | 快官 | - | 霧峰 | 南向 | 路段 | 、 | 水上 | 系統 | - | 中埔 | 北向 | 路段 | ； | 國 | 6 | 霧峰 | 系統 | - | 東 | 草屯 | 東向 | 路段 | 、 | 國 | 10 | 燕巢 | - | 燕巢 | 系統 | 東向 | 路段 | 。 | 
</pre></div>
</div>
</div>
</div>
<ul class="simple">
<li><p>Initialize traditional Chinese dictionary</p>
<ul>
<li><p>Download the traditional chinese dictionary from <a class="reference external" href="https://raw.githubusercontent.com/ldkrsi/jieba-zh_TW/master/jieba/dict.txt"><code class="docutils literal notranslate"><span class="pre">jieba-tw</span></code></a></p></li>
</ul>
</li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">jieba</span><span class="o">.</span><span class="n">set_dictionary</span><span class="p">(</span><span class="n">file_path</span><span class="p">)</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Add own project-specific dictionary</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">jieba</span><span class="o">.</span><span class="n">load_userdict</span><span class="p">(</span><span class="n">file_path</span><span class="p">)</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Add ad-hoc words to dictionary</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">jieba</span><span class="o">.</span><span class="n">add_word</span><span class="p">(</span><span class="n">word</span><span class="p">,</span> <span class="n">freq</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">tag</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Remove words</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">jieba</span><span class="o">.</span><span class="n">del_word</span><span class="p">(</span><span class="n">word</span><span class="p">)</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Word segmentation</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">jieba.cut()</span></code> returns a <code class="docutils literal notranslate"><span class="pre">generator</span></code> object</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">jieba.lcut()</span></code> resuts a <code class="docutils literal notranslate"><span class="pre">List</span></code> object</p></li>
</ul>
</li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># full</span>

<span class="n">jieba</span><span class="o">.</span><span class="n">cut</span><span class="p">(</span><span class="n">TEXT</span><span class="p">,</span> <span class="n">cut_all</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">jieba</span><span class="o">.</span><span class="n">lcut</span><span class="p">(</span><span class="n">TEXT</span><span class="p">,</span> <span class="n">cut_all</span><span class="o">=</span><span class="kc">True</span>

<span class="c1"># default</span>
<span class="n">jieba</span><span class="o">.</span><span class="n">cut</span><span class="p">(</span><span class="n">TEXT</span><span class="p">,</span> <span class="n">cut_all</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="n">jieba</span><span class="o">.</span><span class="n">lcut</span><span class="p">(</span><span class="n">TEXT</span><span class="p">,</span> <span class="n">cut_all</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="segmentation-using-ckip-transformer">
<h2>Segmentation using CKIP Transformer<a class="headerlink" href="#segmentation-using-ckip-transformer" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>For more detail on the installation of <code class="docutils literal notranslate"><span class="pre">ckip-transformers</span></code>, please read their <a class="reference external" href="https://github.com/ckiplab/ckip-transformers">documentation</a>.</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="o">-</span><span class="n">U</span> <span class="n">ckip</span><span class="o">-</span><span class="n">transformers</span>
</pre></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">ckip_transformers</span>
<span class="kn">from</span> <span class="nn">ckip_transformers.nlp</span> <span class="kn">import</span> <span class="n">CkipWordSegmenter</span><span class="p">,</span> <span class="n">CkipPosTagger</span><span class="p">,</span> <span class="n">CkipNerChunker</span>
</pre></div>
</div>
</div>
</div>
<ul class="simple">
<li><p>When initializing the models, <code class="docutils literal notranslate"><span class="pre">level</span></code> specifies three levels of segmentation resolution. Level 1 is the fastest while Level 3 is the most accurate</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">device</span> <span class="pre">=</span> <span class="pre">0</span></code> for GPU computing.</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">%%time</span>

<span class="c1"># Initialize drivers</span>
<span class="n">ws_driver</span> <span class="o">=</span> <span class="n">CkipWordSegmenter</span><span class="p">(</span><span class="n">level</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">device</span><span class="o">=-</span><span class="mi">1</span><span class="p">)</span>
<span class="n">pos_driver</span> <span class="o">=</span> <span class="n">CkipPosTagger</span><span class="p">(</span><span class="n">level</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">device</span><span class="o">=-</span><span class="mi">1</span><span class="p">)</span>
<span class="n">ner_driver</span> <span class="o">=</span> <span class="n">CkipNerChunker</span><span class="p">(</span><span class="n">level</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">device</span><span class="o">=-</span><span class="mi">1</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>CPU times: user 5.44 s, sys: 1.02 s, total: 6.46 s
Wall time: 23.8 s
</pre></div>
</div>
</div>
</div>
<ul class="simple">
<li><p>We usually break the texts into smaller chunks for word segmentation.</p></li>
<li><p>But how we break the texts can be tricky.</p>
<ul>
<li><p>Paragraph breaks?</p></li>
<li><p>Chunks based on period-like punctuations?</p></li>
<li><p>Chunks based on some other delimiters?</p></li>
</ul>
</li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Input text</span>
<span class="n">text</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;</span>
<span class="s2">高速公路局說，目前在國道3號北向水上系統至中埔路段車多壅塞，已回堵約3公里。另外，國道1號北向仁德至永康路段路段，已回堵約有7公里。建議駕駛人提前避開壅塞路段改道行駛，行經車多路段請保持行車安全距離，小心行駛。</span>
<span class="s2">國道車多壅塞路段還有國1內湖-五堵北向路段、楊梅-新竹南向路段；國3三鶯-關西服務區南向路段、快官-霧峰南向路段、水上系統-中埔北向路段；國6霧峰系統-東草屯東向路段、國10燕巢-燕巢系統東向路段。</span>
<span class="s2">&quot;&quot;&quot;</span>

<span class="c1"># paragraph breaks</span>
<span class="n">text</span> <span class="o">=</span> <span class="p">[</span><span class="n">p</span> <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">text</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span> <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">p</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">]</span>
<span class="nb">print</span><span class="p">(</span><span class="n">text</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[&#39;高速公路局說，目前在國道3號北向水上系統至中埔路段車多壅塞，已回堵約3公里。另外，國道1號北向仁德至永康路段路段，已回堵約有7公里。建議駕駛人提前避開壅塞路段改道行駛，行經車多路段請保持行車安全距離，小心行駛。&#39;, &#39;國道車多壅塞路段還有國1內湖-五堵北向路段、楊梅-新竹南向路段；國3三鶯-關西服務區南向路段、快官-霧峰南向路段、水上系統-中埔北向路段；國6霧峰系統-東草屯東向路段、國10燕巢-燕巢系統東向路段。&#39;]
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Run pipeline</span>
<span class="n">ws</span> <span class="o">=</span> <span class="n">ws_driver</span><span class="p">(</span><span class="n">text</span><span class="p">)</span>
<span class="n">pos</span> <span class="o">=</span> <span class="n">pos_driver</span><span class="p">(</span><span class="n">ws</span><span class="p">)</span>
<span class="n">ner</span> <span class="o">=</span> <span class="n">ner_driver</span><span class="p">(</span><span class="n">text</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Tokenization: 100%|██████████| 2/2 [00:00&lt;00:00, 6472.69it/s]
Inference: 100%|██████████| 1/1 [00:00&lt;00:00,  2.25it/s]
Tokenization: 100%|██████████| 2/2 [00:00&lt;00:00, 5507.95it/s]
Inference: 100%|██████████| 1/1 [00:00&lt;00:00,  1.30it/s]
Tokenization: 100%|██████████| 2/2 [00:00&lt;00:00, 6584.46it/s]
Inference: 100%|██████████| 1/1 [00:00&lt;00:00,  2.55it/s]
</pre></div>
</div>
</div>
</div>
<ul class="simple">
<li><p>When doing the word segmentation, there are a few parameters to consider in <code class="docutils literal notranslate"><span class="pre">ws_driver()</span></code>:</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">use_delim</span></code>: by default, ckip transformer breaks the texts into sentences using the following delimiters <code class="docutils literal notranslate"><span class="pre">'，,。：:；;！!？?'</span></code>, and concatenate them back in the outputs.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">delim_set</span></code>: to specify self-defined sentence delimiters</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">batch_size</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">max_length</span></code></p></li>
</ul>
</li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Enable sentence segmentation</span>
<span class="n">ws</span> <span class="o">=</span> <span class="n">ws_driver</span><span class="p">(</span><span class="n">text</span><span class="p">,</span> <span class="n">use_delim</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">ner</span> <span class="o">=</span> <span class="n">ner_driver</span><span class="p">(</span><span class="n">text</span><span class="p">,</span> <span class="n">use_delim</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Tokenization: 100%|██████████| 2/2 [00:00&lt;00:00, 4877.10it/s]
Inference: 100%|██████████| 1/1 [00:00&lt;00:00,  1.28it/s]
Tokenization: 100%|██████████| 2/2 [00:00&lt;00:00, 4928.68it/s]
Inference: 100%|██████████| 1/1 [00:00&lt;00:00,  1.34it/s]
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Disable sentence segmentation</span>
<span class="n">pos</span> <span class="o">=</span> <span class="n">pos_driver</span><span class="p">(</span><span class="n">ws</span><span class="p">,</span> <span class="n">use_delim</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

<span class="c1"># Use new line characters and tabs for sentence segmentation</span>
<span class="n">pos</span> <span class="o">=</span> <span class="n">pos_driver</span><span class="p">(</span><span class="n">ws</span><span class="p">,</span> <span class="n">delim_set</span><span class="o">=</span><span class="s1">&#39;</span><span class="se">\n\t</span><span class="s1">&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Tokenization: 100%|██████████| 2/2 [00:00&lt;00:00, 3328.81it/s]
Inference: 100%|██████████| 1/1 [00:00&lt;00:00,  2.52it/s]
Tokenization: 100%|██████████| 2/2 [00:00&lt;00:00, 7973.96it/s]
Inference: 100%|██████████| 1/1 [00:00&lt;00:00,  2.72it/s]
</pre></div>
</div>
</div>
</div>
<ul class="simple">
<li><p>A quick comparison of the results based on <code class="docutils literal notranslate"><span class="pre">jieba</span></code> and <code class="docutils literal notranslate"><span class="pre">ckip-transomers</span></code>:</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="s1">&#39; | &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">text_jb</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span> | 高速公路 | 局說 | ， | 目前 | 在 | 國道 | 3 | 號 | 北向 | 水上 | 系統 | 至 | 中埔 | 路段 | 車多 | 壅塞 | ， | 已回 | 堵約 | 3 | 公里 | 。 | 另外 | ， | 國道 | 1 | 號 | 北向 | 仁德 | 至 | 永康 | 路段 | 路段 | ， | 已回 | 堵 | 約 | 有 | 7 | 公里 | 。 | 建議 | 駕駛人 | 提前 | 避開 | 壅塞 | 路段 | 改道 | 行駛 | ， | 行經車 | 多 | 路段 | 請 | 保持 | 行車 | 安全 | 距離 | ， | 小心 | 行駛 | 。 | 
 | 國道 | 車多 | 壅塞 | 路段 | 還有國 | 1 | 內湖 | - | 五堵 | 北向 | 路段 | 、 | 楊梅 | - | 新竹 | 南向 | 路段 | ； | 國 | 3 | 三鶯 | - | 關 | 西服 | 務區 | 南向 | 路段 | 、 | 快官 | - | 霧峰 | 南向 | 路段 | 、 | 水上 | 系統 | - | 中埔 | 北向 | 路段 | ； | 國 | 6 | 霧峰 | 系統 | - | 東 | 草屯 | 東向 | 路段 | 、 | 國 | 10 | 燕巢 | - | 燕巢 | 系統 | 東向 | 路段 | 。 | 
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n\n</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="s1">&#39; | &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">p</span><span class="p">)</span> <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">ws</span><span class="p">]))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>高速 | 公路局 | 說 | ， | 目前 | 在 | 國道 | 3號 | 北向 | 水上 | 系統 | 至 | 中埔 | 路段 | 車 | 多 | 壅塞 | ， | 已 | 回堵 | 約 | 3 | 公里 | 。 | 另外 | ， | 國道 | 1號 | 北 | 向 | 仁德 | 至 | 永康 | 路段 | 路段 | ， | 已 | 回堵 | 約 | 有 | 7 | 公里 | 。 | 建議 | 駕駛人 | 提前 | 避開 | 壅塞 | 路段 | 改道 | 行駛 | ， | 行經 | 車 | 多 | 路段 | 請 | 保持 | 行車 | 安全 | 距離 | ， | 小心 | 行駛 | 。

國道 | 車 | 多 | 壅塞 | 路段 | 還 | 有 | 國1 | 內湖 | - | 五堵 | 北向 | 路段 | 、 | 楊梅 | - | 新竹 | 南向 | 路段 | ； | 國3 | 三鶯 | - | 關西 | 服務區 | 南向 | 路段 | 、 | 快官 | - | 霧峰 | 南向 | 路段 | 、 | 水上 | 系統 | - | 中埔 | 北向 | 路段 | ； | 國6 | 霧峰 | 系統 | - | 東 | 草屯 | 東向 | 路段 | 、 | 國10 | 燕巢 | - | 燕巢 | 系統 | 東向 | 路段 | 。
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Pack word segmentation and part-of-speech results</span>
<span class="k">def</span> <span class="nf">pack_ws_pos_sentece</span><span class="p">(</span><span class="n">sentence_ws</span><span class="p">,</span> <span class="n">sentence_pos</span><span class="p">):</span>
    <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">sentence_ws</span><span class="p">)</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="n">sentence_pos</span><span class="p">)</span>
    <span class="n">res</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">word_ws</span><span class="p">,</span> <span class="n">word_pos</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">sentence_ws</span><span class="p">,</span> <span class="n">sentence_pos</span><span class="p">):</span>
        <span class="n">res</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">word_ws</span><span class="si">}</span><span class="s1">(</span><span class="si">{</span><span class="n">word_pos</span><span class="si">}</span><span class="s1">)&#39;</span><span class="p">)</span>
    <span class="k">return</span> <span class="s1">&#39;</span><span class="se">\u3000</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">res</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Show results</span>
<span class="k">for</span> <span class="n">sentence</span><span class="p">,</span> <span class="n">sentence_ws</span><span class="p">,</span> <span class="n">sentence_pos</span><span class="p">,</span> <span class="n">sentence_ner</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span>
        <span class="n">text</span><span class="p">,</span> <span class="n">ws</span><span class="p">,</span> <span class="n">pos</span><span class="p">,</span> <span class="n">ner</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">sentence</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">pack_ws_pos_sentece</span><span class="p">(</span><span class="n">sentence_ws</span><span class="p">,</span> <span class="n">sentence_pos</span><span class="p">))</span>
    <span class="k">for</span> <span class="n">entity</span> <span class="ow">in</span> <span class="n">sentence_ner</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">entity</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>高速公路局說，目前在國道3號北向水上系統至中埔路段車多壅塞，已回堵約3公里。另外，國道1號北向仁德至永康路段路段，已回堵約有7公里。建議駕駛人提前避開壅塞路段改道行駛，行經車多路段請保持行車安全距離，小心行駛。
高速(VH)　公路局(Nc)　說(VE)　，(COMMACATEGORY)　目前(Nd)　在(P)　國道(Nc)　3號(Neu)　北向(Nc)　水上(Nc)　系統(Na)　至(Caa)　中埔(Nc)　路段(Na)　車(Na)　多(D)　壅塞(VH)　，(COMMACATEGORY)　已(D)　回堵(VC)　約(Da)　3(Neu)　公里(Nf)　。(PERIODCATEGORY)　另外(Cbb)　，(COMMACATEGORY)　國道(Nc)　1號(Nc)　北(Ncd)　向(P)　仁德(Nc)　至(Caa)　永康(Nc)　路段(Na)　路段(Na)　，(COMMACATEGORY)　已(D)　回堵(VC)　約(Da)　有(V_2)　7(Neu)　公里(Nf)　。(PERIODCATEGORY)　建議(VE)　駕駛人(Na)　提前(VB)　避開(VC)　壅塞(VH)　路段(Na)　改道(VA)　行駛(VA)　，(COMMACATEGORY)　行經(VCL)　車(Na)　多(VH)　路段(Na)　請(VF)　保持(VJ)　行車(VA)　安全(VH)　距離(Na)　，(COMMACATEGORY)　小心(VK)　行駛(VA)　。(PERIODCATEGORY)
NerToken(word=&#39;高速公路局&#39;, ner=&#39;ORG&#39;, idx=(0, 5))
NerToken(word=&#39;國道3號&#39;, ner=&#39;FAC&#39;, idx=(10, 14))
NerToken(word=&#39;中埔&#39;, ner=&#39;GPE&#39;, idx=(21, 23))
NerToken(word=&#39;3公里&#39;, ner=&#39;QUANTITY&#39;, idx=(34, 37))
NerToken(word=&#39;國道1號&#39;, ner=&#39;FAC&#39;, idx=(41, 45))
NerToken(word=&#39;仁德&#39;, ner=&#39;GPE&#39;, idx=(47, 49))
NerToken(word=&#39;永康路段&#39;, ner=&#39;FAC&#39;, idx=(50, 54))
NerToken(word=&#39;7公里&#39;, ner=&#39;QUANTITY&#39;, idx=(62, 65))

國道車多壅塞路段還有國1內湖-五堵北向路段、楊梅-新竹南向路段；國3三鶯-關西服務區南向路段、快官-霧峰南向路段、水上系統-中埔北向路段；國6霧峰系統-東草屯東向路段、國10燕巢-燕巢系統東向路段。
國道(Na)　車(Na)　多(VH)　壅塞(VH)　路段(Na)　還(D)　有(V_2)　國1(Na)　內湖(Nc)　-(DASHCATEGORY)　五堵(Nc)　北向(Na)　路段(Na)　、(PAUSECATEGORY)　楊梅(Nc)　-(DASHCATEGORY)　新竹(Nc)　南向(Na)　路段(Na)　；(SEMICOLONCATEGORY)　國3(Na)　三鶯(Nc)　-(DASHCATEGORY)　關西(Nc)　服務區(Nc)　南向(A)　路段(Na)　、(PAUSECATEGORY)　快官(Na)　-(DASHCATEGORY)　霧峰(Nc)　南向(Nc)　路段(Na)　、(PAUSECATEGORY)　水上(Nc)　系統(Na)　-(DASHCATEGORY)　中埔(Nc)　北向(Na)　路段(Na)　；(SEMICOLONCATEGORY)　國6(Na)　霧峰(Nc)　系統(Na)　-(DASHCATEGORY)　東(Ncd)　草屯(Nc)　東向(Na)　路段(Na)　、(PAUSECATEGORY)　國10(Na)　燕巢(Nc)　-(DASHCATEGORY)　燕巢(Nc)　系統(Na)　東向(VH)　路段(Na)　。(PERIODCATEGORY)
NerToken(word=&#39;國道&#39;, ner=&#39;FAC&#39;, idx=(0, 2))
NerToken(word=&#39;國3三鶯-關西服務區&#39;, ner=&#39;FAC&#39;, idx=(32, 42))
NerToken(word=&#39;中埔&#39;, ner=&#39;GPE&#39;, idx=(62, 64))
NerToken(word=&#39;國6霧峰系統&#39;, ner=&#39;FAC&#39;, idx=(69, 75))
NerToken(word=&#39;東草屯東向路段&#39;, ner=&#39;FAC&#39;, idx=(76, 83))
NerToken(word=&#39;國10燕巢-燕巢系統&#39;, ner=&#39;FAC&#39;, idx=(84, 94))
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="challenges-of-word-segmentation">
<h2>Challenges of Word Segmentation<a class="headerlink" href="#challenges-of-word-segmentation" title="Permalink to this headline">¶</a></h2>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">text2</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s2">&quot;女人沒有她男人甚麼也不是&quot;</span><span class="p">,</span>
    <span class="s2">&quot;女人沒有了男人將會一無所有&quot;</span><span class="p">,</span>
    <span class="s2">&quot;下雨天留客天留我不留&quot;</span><span class="p">,</span>
    <span class="s2">&quot;行路人等不得在此大小便&quot;</span><span class="p">,</span>
    <span class="s2">&quot;兒的生活好痛苦一點也沒有糧食多病少掙了很多錢&quot;</span><span class="p">,</span>
<span class="p">]</span>
<span class="n">ws2</span> <span class="o">=</span> <span class="n">ws_driver</span><span class="p">(</span><span class="n">text2</span><span class="p">)</span>
<span class="n">pos2</span> <span class="o">=</span> <span class="n">pos_driver</span><span class="p">(</span><span class="n">ws2</span><span class="p">)</span>
<span class="n">ner2</span> <span class="o">=</span> <span class="n">ner_driver</span><span class="p">(</span><span class="n">text2</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Tokenization: 100%|██████████| 5/5 [00:00&lt;00:00, 31068.92it/s]
Inference: 100%|██████████| 1/1 [00:00&lt;00:00,  4.31it/s]
Tokenization: 100%|██████████| 5/5 [00:00&lt;00:00, 13477.84it/s]
Inference: 100%|██████████| 1/1 [00:00&lt;00:00,  4.24it/s]
Tokenization: 100%|██████████| 5/5 [00:00&lt;00:00, 18859.28it/s]
Inference: 100%|██████████| 1/1 [00:00&lt;00:00,  4.16it/s]
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Show results</span>
<span class="k">for</span> <span class="n">sentence</span><span class="p">,</span> <span class="n">sentence_ws</span><span class="p">,</span> <span class="n">sentence_pos</span><span class="p">,</span> <span class="n">sentence_ner</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span>
        <span class="n">text2</span><span class="p">,</span> <span class="n">ws2</span><span class="p">,</span> <span class="n">pos2</span><span class="p">,</span> <span class="n">ner2</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">sentence</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">pack_ws_pos_sentece</span><span class="p">(</span><span class="n">sentence_ws</span><span class="p">,</span> <span class="n">sentence_pos</span><span class="p">))</span>
    <span class="k">for</span> <span class="n">entity</span> <span class="ow">in</span> <span class="n">sentence_ner</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">entity</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>女人沒有她男人甚麼也不是
女人(Na)　沒有(VJ)　她(Nh)　男人(Na)　甚麼(Nep)　也(D)　不(D)　是(SHI)

女人沒有了男人將會一無所有
女人(Na)　沒有(VJ)　了(Di)　男人(Na)　將(D)　會(D)　一無所有(VH)

下雨天留客天留我不留
下雨天(Nd)　留(VC)　客(Na)　天(Na)　留(VC)　我(Nh)　不(D)　留(VC)

行路人等不得在此大小便
行路人(Na)　等(Cab)　不得(D)　在(P)　此(Nep)　大小便(VA)

兒的生活好痛苦一點也沒有糧食多病少掙了很多錢
兒(Na)　的(DE)　生活(Na)　好(Dfa)　痛苦(VH)　一點(Neqa)　也(D)　沒有(VJ)　糧食(Na)　多(VH)　病(Na)　少(VH)　掙(VC)　了(Di)　很多(Neqa)　錢(Na)
</pre></div>
</div>
</div>
</div>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>It is still not clear to me how we can include user-defined dictionary in the <code class="docutils literal notranslate"><span class="pre">ckip-transformers</span></code>. This may be a problem to all deep-learning based segmenters I think.</p>
<p>However, I know that it is possible to use self-defined dictionary in the <code class="docutils literal notranslate"><span class="pre">ckiptagger</span></code>.</p>
<p>If you know where and how to incorporate self-defined dictionary in the <code class="docutils literal notranslate"><span class="pre">ckip-transformers</span></code>, please let me know. Thanks!</p>
</div>
</div>
<div class="section" id="other-modules-for-chinese-word-segmentation">
<h2>Other Modules for Chinese Word Segmentation<a class="headerlink" href="#other-modules-for-chinese-word-segmentation" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>You can try other modules and check their segmentation results and qualities:</p>
<ul>
<li><p><a class="reference external" href="https://github.com/ckiplab/ckiptagger"><code class="docutils literal notranslate"><span class="pre">ckiptagger</span></code></a> (Probably the predecessor of <code class="docutils literal notranslate"><span class="pre">ckip-transformers</span></code>?)</p></li>
<li><p><a class="reference external" href="https://github.com/lancopku/pkuseg-python"><code class="docutils literal notranslate"><span class="pre">pkuseg</span></code></a></p></li>
<li><p><a class="reference external" href="https://github.com/hankcs/pyhanlp"><code class="docutils literal notranslate"><span class="pre">pyhanlp</span></code></a></p></li>
<li><p><a class="reference external" href="https://github.com/isnowfy/snownlp"><code class="docutils literal notranslate"><span class="pre">snownlp</span></code></a></p></li>
</ul>
</li>
<li><p>When you play with other segmenters, please note a few important issues for determining the segmenter for your project:</p>
<ul>
<li><p>Most of the segmenters were trained based on the simplified Chinese.</p></li>
<li><p>It is important to know if the segmenter allows users to add self-defined dictionary to improve segmentation performance.</p></li>
<li><p>The documentation of the tagsets (i.e., POS, NER) needs to be well-maintained so that users can easily utilize the segmentation results for later downstream projects.</p></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="chinese-nlp-using-spacy">
<h2>Chinese NLP Using <code class="docutils literal notranslate"><span class="pre">spacy</span></code><a class="headerlink" href="#chinese-nlp-using-spacy" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">spacy</span> <span class="pre">3+</span></code> starts to support transformer-based NLP. Please make sure you have the most recent version of the module.</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ pip show spacy
</pre></div>
</div>
<ul class="simple">
<li><p>Documentation of <a class="reference external" href="https://spacy.io/usage#quickstart"><code class="docutils literal notranslate"><span class="pre">spacy</span></code></a></p></li>
</ul>
<ul class="simple">
<li><p>Installation steps:</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ conda activate python-notes
$ conda install -c conda-forge spacy
$ python -m spacy download zh_core_web_trf
$ python -m spacy download zh_core_web_sm
$ python -m spacy download en_core_web_trf
$ python -m spacy download en_core_web_sm
</pre></div>
</div>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">spacy</span></code> provides a good API to help users install the package. Please set up the relevant parameters according to the API and find your own installation codes.</p></li>
</ul>
<hr class="docutils" />
<p><img alt="" src="../_images/spacy-install.png" /></p>
<hr class="docutils" />
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">spacy</span>
<span class="kn">from</span> <span class="nn">spacy</span> <span class="kn">import</span> <span class="n">displacy</span>
<span class="c1"># load language model</span>
<span class="n">nlp_zh</span> <span class="o">=</span> <span class="n">spacy</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="s1">&#39;zh_core_web_trf&#39;</span><span class="p">)</span>  <span class="c1">## disable=[&quot;parser&quot;]</span>
<span class="c1"># parse text</span>
<span class="n">doc</span> <span class="o">=</span> <span class="n">nlp_zh</span><span class="p">(</span><span class="s1">&#39;這是一個中文的句子&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>For more information on POS tags, see spaCy <a class="reference external" href="https://spacy.io/api/annotation#pos-tagging">POS tag scheme documentation</a>.</p>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># parts of speech tagging</span>
<span class="k">for</span> <span class="n">token</span> <span class="ow">in</span> <span class="n">doc</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(((</span>
        <span class="n">token</span><span class="o">.</span><span class="n">text</span><span class="p">,</span>
        <span class="n">token</span><span class="o">.</span><span class="n">pos_</span><span class="p">,</span>
        <span class="n">token</span><span class="o">.</span><span class="n">tag_</span><span class="p">,</span>
        <span class="n">token</span><span class="o">.</span><span class="n">dep_</span><span class="p">,</span>
        <span class="n">token</span><span class="o">.</span><span class="n">is_alpha</span><span class="p">,</span>
        <span class="n">token</span><span class="o">.</span><span class="n">is_stop</span><span class="p">,</span>
    <span class="p">)))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>(&#39;這&#39;, &#39;PRON&#39;, &#39;PN&#39;, &#39;ROOT&#39;, True, False)
(&#39;是&#39;, &#39;VERB&#39;, &#39;VC&#39;, &#39;cop&#39;, True, True)
(&#39;一&#39;, &#39;NUM&#39;, &#39;CD&#39;, &#39;dep&#39;, True, True)
(&#39;個&#39;, &#39;NUM&#39;, &#39;M&#39;, &#39;mark:clf&#39;, True, False)
(&#39;中文&#39;, &#39;NOUN&#39;, &#39;NN&#39;, &#39;nmod:assmod&#39;, True, False)
(&#39;的&#39;, &#39;PART&#39;, &#39;DEG&#39;, &#39;case&#39;, True, True)
(&#39;句子&#39;, &#39;NOUN&#39;, &#39;NN&#39;, &#39;ROOT&#39;, True, False)
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="s1">&#39; | &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="n">token</span><span class="o">.</span><span class="n">text</span> <span class="o">+</span> <span class="s2">&quot;_&quot;</span> <span class="o">+</span> <span class="n">token</span><span class="o">.</span><span class="n">tag_</span> <span class="k">for</span> <span class="n">token</span> <span class="ow">in</span> <span class="n">doc</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&#39;這_PN | 是_VC | 一_CD | 個_M | 中文_NN | 的_DEG | 句子_NN&#39;
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">## Check meaning of a POS tag</span>
<span class="n">spacy</span><span class="o">.</span><span class="n">explain</span><span class="p">(</span><span class="s1">&#39;NN&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&#39;noun, singular or mass&#39;
</pre></div>
</div>
</div>
</div>
<div class="section" id="visualizing-linguistic-features">
<h3>Visualizing linguistic features<a class="headerlink" href="#visualizing-linguistic-features" title="Permalink to this headline">¶</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Visualize</span>
<span class="n">displacy</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="n">doc</span><span class="p">,</span> <span class="n">style</span><span class="o">=</span><span class="s2">&quot;dep&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span class="tex2jax_ignore"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:lang="zh" id="c4971055233345dcacd2dd9ed0e84d5c-0" class="displacy" width="1275" height="399.5" direction="ltr" style="max-width: none; height: 399.5px; color: #000000; background: #ffffff; font-family: Arial; direction: ltr">
<text class="displacy-token" fill="currentColor" text-anchor="middle" y="309.5">
    <tspan class="displacy-word" fill="currentColor" x="50">這</tspan>
    <tspan class="displacy-tag" dy="2em" fill="currentColor" x="50">PRON</tspan>
</text>

<text class="displacy-token" fill="currentColor" text-anchor="middle" y="309.5">
    <tspan class="displacy-word" fill="currentColor" x="225">是</tspan>
    <tspan class="displacy-tag" dy="2em" fill="currentColor" x="225">VERB</tspan>
</text>

<text class="displacy-token" fill="currentColor" text-anchor="middle" y="309.5">
    <tspan class="displacy-word" fill="currentColor" x="400">一</tspan>
    <tspan class="displacy-tag" dy="2em" fill="currentColor" x="400">NUM</tspan>
</text>

<text class="displacy-token" fill="currentColor" text-anchor="middle" y="309.5">
    <tspan class="displacy-word" fill="currentColor" x="575">個</tspan>
    <tspan class="displacy-tag" dy="2em" fill="currentColor" x="575">NUM</tspan>
</text>

<text class="displacy-token" fill="currentColor" text-anchor="middle" y="309.5">
    <tspan class="displacy-word" fill="currentColor" x="750">中文</tspan>
    <tspan class="displacy-tag" dy="2em" fill="currentColor" x="750">NOUN</tspan>
</text>

<text class="displacy-token" fill="currentColor" text-anchor="middle" y="309.5">
    <tspan class="displacy-word" fill="currentColor" x="925">的</tspan>
    <tspan class="displacy-tag" dy="2em" fill="currentColor" x="925">PART</tspan>
</text>

<text class="displacy-token" fill="currentColor" text-anchor="middle" y="309.5">
    <tspan class="displacy-word" fill="currentColor" x="1100">句子</tspan>
    <tspan class="displacy-tag" dy="2em" fill="currentColor" x="1100">NOUN</tspan>
</text>

<g class="displacy-arrow">
    <path class="displacy-arc" id="arrow-c4971055233345dcacd2dd9ed0e84d5c-0-0" stroke-width="2px" d="M245,264.5 C245,2.0 1100.0,2.0 1100.0,264.5" fill="none" stroke="currentColor"/>
    <text dy="1.25em" style="font-size: 0.8em; letter-spacing: 1px">
        <textPath xlink:href="#arrow-c4971055233345dcacd2dd9ed0e84d5c-0-0" class="displacy-label" startOffset="50%" side="left" fill="currentColor" text-anchor="middle">cop</textPath>
    </text>
    <path class="displacy-arrowhead" d="M245,266.5 L237,254.5 253,254.5" fill="currentColor"/>
</g>

<g class="displacy-arrow">
    <path class="displacy-arc" id="arrow-c4971055233345dcacd2dd9ed0e84d5c-0-1" stroke-width="2px" d="M245,264.5 C245,177.0 390.0,177.0 390.0,264.5" fill="none" stroke="currentColor"/>
    <text dy="1.25em" style="font-size: 0.8em; letter-spacing: 1px">
        <textPath xlink:href="#arrow-c4971055233345dcacd2dd9ed0e84d5c-0-1" class="displacy-label" startOffset="50%" side="left" fill="currentColor" text-anchor="middle">dep</textPath>
    </text>
    <path class="displacy-arrowhead" d="M390.0,266.5 L398.0,254.5 382.0,254.5" fill="currentColor"/>
</g>

<g class="displacy-arrow">
    <path class="displacy-arc" id="arrow-c4971055233345dcacd2dd9ed0e84d5c-0-2" stroke-width="2px" d="M420,264.5 C420,177.0 565.0,177.0 565.0,264.5" fill="none" stroke="currentColor"/>
    <text dy="1.25em" style="font-size: 0.8em; letter-spacing: 1px">
        <textPath xlink:href="#arrow-c4971055233345dcacd2dd9ed0e84d5c-0-2" class="displacy-label" startOffset="50%" side="left" fill="currentColor" text-anchor="middle">mark:clf</textPath>
    </text>
    <path class="displacy-arrowhead" d="M565.0,266.5 L573.0,254.5 557.0,254.5" fill="currentColor"/>
</g>

<g class="displacy-arrow">
    <path class="displacy-arc" id="arrow-c4971055233345dcacd2dd9ed0e84d5c-0-3" stroke-width="2px" d="M770,264.5 C770,89.5 1095.0,89.5 1095.0,264.5" fill="none" stroke="currentColor"/>
    <text dy="1.25em" style="font-size: 0.8em; letter-spacing: 1px">
        <textPath xlink:href="#arrow-c4971055233345dcacd2dd9ed0e84d5c-0-3" class="displacy-label" startOffset="50%" side="left" fill="currentColor" text-anchor="middle">nmod:assmod</textPath>
    </text>
    <path class="displacy-arrowhead" d="M770,266.5 L762,254.5 778,254.5" fill="currentColor"/>
</g>

<g class="displacy-arrow">
    <path class="displacy-arc" id="arrow-c4971055233345dcacd2dd9ed0e84d5c-0-4" stroke-width="2px" d="M770,264.5 C770,177.0 915.0,177.0 915.0,264.5" fill="none" stroke="currentColor"/>
    <text dy="1.25em" style="font-size: 0.8em; letter-spacing: 1px">
        <textPath xlink:href="#arrow-c4971055233345dcacd2dd9ed0e84d5c-0-4" class="displacy-label" startOffset="50%" side="left" fill="currentColor" text-anchor="middle">case</textPath>
    </text>
    <path class="displacy-arrowhead" d="M915.0,266.5 L923.0,254.5 907.0,254.5" fill="currentColor"/>
</g>
</svg></span></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">options</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;compact&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
    <span class="s2">&quot;bg&quot;</span><span class="p">:</span> <span class="s2">&quot;#09a3d5&quot;</span><span class="p">,</span>
    <span class="s2">&quot;color&quot;</span><span class="p">:</span> <span class="s2">&quot;white&quot;</span><span class="p">,</span>
    <span class="s2">&quot;font&quot;</span><span class="p">:</span> <span class="s2">&quot;Source Sans Pro&quot;</span><span class="p">,</span>
    <span class="s2">&quot;distance&quot;</span><span class="p">:</span> <span class="mi">120</span>
<span class="p">}</span>
<span class="n">displacy</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="n">doc</span><span class="p">,</span> <span class="n">style</span><span class="o">=</span><span class="s2">&quot;dep&quot;</span><span class="p">,</span> <span class="n">options</span><span class="o">=</span><span class="n">options</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span class="tex2jax_ignore"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:lang="zh" id="edeb4404775e442f85ba6b14afd674e3-0" class="displacy" width="890" height="317.0" direction="ltr" style="max-width: none; height: 317.0px; color: white; background: #09a3d5; font-family: Source Sans Pro; direction: ltr">
<text class="displacy-token" fill="currentColor" text-anchor="middle" y="227.0">
    <tspan class="displacy-word" fill="currentColor" x="50">這</tspan>
    <tspan class="displacy-tag" dy="2em" fill="currentColor" x="50">PRON</tspan>
</text>

<text class="displacy-token" fill="currentColor" text-anchor="middle" y="227.0">
    <tspan class="displacy-word" fill="currentColor" x="170">是</tspan>
    <tspan class="displacy-tag" dy="2em" fill="currentColor" x="170">VERB</tspan>
</text>

<text class="displacy-token" fill="currentColor" text-anchor="middle" y="227.0">
    <tspan class="displacy-word" fill="currentColor" x="290">一</tspan>
    <tspan class="displacy-tag" dy="2em" fill="currentColor" x="290">NUM</tspan>
</text>

<text class="displacy-token" fill="currentColor" text-anchor="middle" y="227.0">
    <tspan class="displacy-word" fill="currentColor" x="410">個</tspan>
    <tspan class="displacy-tag" dy="2em" fill="currentColor" x="410">NUM</tspan>
</text>

<text class="displacy-token" fill="currentColor" text-anchor="middle" y="227.0">
    <tspan class="displacy-word" fill="currentColor" x="530">中文</tspan>
    <tspan class="displacy-tag" dy="2em" fill="currentColor" x="530">NOUN</tspan>
</text>

<text class="displacy-token" fill="currentColor" text-anchor="middle" y="227.0">
    <tspan class="displacy-word" fill="currentColor" x="650">的</tspan>
    <tspan class="displacy-tag" dy="2em" fill="currentColor" x="650">PART</tspan>
</text>

<text class="displacy-token" fill="currentColor" text-anchor="middle" y="227.0">
    <tspan class="displacy-word" fill="currentColor" x="770">句子</tspan>
    <tspan class="displacy-tag" dy="2em" fill="currentColor" x="770">NOUN</tspan>
</text>

<g class="displacy-arrow">
    <path class="displacy-arc" id="arrow-edeb4404775e442f85ba6b14afd674e3-0-0" stroke-width="2px" d="M182,182.0 182,122.0 770.0,122.0 770.0,182.0" fill="none" stroke="currentColor"/>
    <text dy="1.25em" style="font-size: 0.8em; letter-spacing: 1px">
        <textPath xlink:href="#arrow-edeb4404775e442f85ba6b14afd674e3-0-0" class="displacy-label" startOffset="50%" side="left" fill="currentColor" text-anchor="middle">cop</textPath>
    </text>
    <path class="displacy-arrowhead" d="M182,184.0 L178,176.0 186,176.0" fill="currentColor"/>
</g>

<g class="displacy-arrow">
    <path class="displacy-arc" id="arrow-edeb4404775e442f85ba6b14afd674e3-0-1" stroke-width="2px" d="M182,182.0 182,162.0 284.0,162.0 284.0,182.0" fill="none" stroke="currentColor"/>
    <text dy="1.25em" style="font-size: 0.8em; letter-spacing: 1px">
        <textPath xlink:href="#arrow-edeb4404775e442f85ba6b14afd674e3-0-1" class="displacy-label" startOffset="50%" side="left" fill="currentColor" text-anchor="middle">dep</textPath>
    </text>
    <path class="displacy-arrowhead" d="M284.0,184.0 L288.0,176.0 280.0,176.0" fill="currentColor"/>
</g>

<g class="displacy-arrow">
    <path class="displacy-arc" id="arrow-edeb4404775e442f85ba6b14afd674e3-0-2" stroke-width="2px" d="M302,182.0 302,162.0 404.0,162.0 404.0,182.0" fill="none" stroke="currentColor"/>
    <text dy="1.25em" style="font-size: 0.8em; letter-spacing: 1px">
        <textPath xlink:href="#arrow-edeb4404775e442f85ba6b14afd674e3-0-2" class="displacy-label" startOffset="50%" side="left" fill="currentColor" text-anchor="middle">mark:clf</textPath>
    </text>
    <path class="displacy-arrowhead" d="M404.0,184.0 L408.0,176.0 400.0,176.0" fill="currentColor"/>
</g>

<g class="displacy-arrow">
    <path class="displacy-arc" id="arrow-edeb4404775e442f85ba6b14afd674e3-0-3" stroke-width="2px" d="M542,182.0 542,142.0 767.0,142.0 767.0,182.0" fill="none" stroke="currentColor"/>
    <text dy="1.25em" style="font-size: 0.8em; letter-spacing: 1px">
        <textPath xlink:href="#arrow-edeb4404775e442f85ba6b14afd674e3-0-3" class="displacy-label" startOffset="50%" side="left" fill="currentColor" text-anchor="middle">nmod:assmod</textPath>
    </text>
    <path class="displacy-arrowhead" d="M542,184.0 L538,176.0 546,176.0" fill="currentColor"/>
</g>

<g class="displacy-arrow">
    <path class="displacy-arc" id="arrow-edeb4404775e442f85ba6b14afd674e3-0-4" stroke-width="2px" d="M542,182.0 542,162.0 644.0,162.0 644.0,182.0" fill="none" stroke="currentColor"/>
    <text dy="1.25em" style="font-size: 0.8em; letter-spacing: 1px">
        <textPath xlink:href="#arrow-edeb4404775e442f85ba6b14afd674e3-0-4" class="displacy-label" startOffset="50%" side="left" fill="currentColor" text-anchor="middle">case</textPath>
    </text>
    <path class="displacy-arrowhead" d="M644.0,184.0 L648.0,176.0 640.0,176.0" fill="currentColor"/>
</g>
</svg></span></div></div>
</div>
<ul class="simple">
<li><p>To process multiple documents of a large corpus, it would be more efficient to work on them on batches of texts.</p></li>
<li><p>spaCy’s <code class="docutils literal notranslate"><span class="pre">nlp.pipe()</span></code> method takes an <code class="docutils literal notranslate"><span class="pre">iterable</span></code> of texts and yields processed <code class="docutils literal notranslate"><span class="pre">Doc</span></code> objects. (That is, <code class="docutils literal notranslate"><span class="pre">nlp.pipe()</span></code> returns a <code class="docutils literal notranslate"><span class="pre">generator</span></code>.)</p></li>
<li><p>Use the <code class="docutils literal notranslate"><span class="pre">disable</span></code> keyword argument to disable components we don’t need – either when loading a pipeline, or during processing with <code class="docutils literal notranslate"><span class="pre">nlp.pipe</span></code>. This is more efficient in computing.</p></li>
<li><p>Please read spaCy’s documentation on <a class="reference external" href="https://spacy.io/usage/processing-pipelines#processing">preprocessing</a>.</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">doc2</span> <span class="o">=</span> <span class="n">nlp_zh</span><span class="o">.</span><span class="n">pipe</span><span class="p">(</span><span class="n">text</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">d</span> <span class="ow">in</span> <span class="n">doc2</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39; | &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="n">token</span><span class="o">.</span><span class="n">text</span> <span class="o">+</span> <span class="s2">&quot;_&quot;</span> <span class="o">+</span> <span class="n">token</span><span class="o">.</span><span class="n">tag_</span> <span class="k">for</span> <span class="n">token</span> <span class="ow">in</span> <span class="n">d</span><span class="p">])</span> <span class="o">+</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>高速_JJ | 公路_NN | 局說_VV | ，_PU | 目前_NT | 在_P | 國道_NN | 3_OD | 號_NN | 北向_NN | 水上_NR | 系統_NN | 至_CC | 中埔_NR | 路段_NN | 車多_AD | 壅塞_VV | ，_PU | 已_AD | 回_VV | 堵約_AD | 3_CD | 公里_M | 。_PU | 另外_AD | ，_PU | 國道_NN | 1_OD | 號_NN | 北向_NN | 仁德_NR | 至_CC | 永康_NR | 路段_NN | 路段_NN | ，_PU | 已_AD | 回_VV | 堵約_AD | 有_VE | 7_CD | 公里_M | 。_PU | 建議_VV | 駕駛人_NN | 提前_AD | 避開_VV | 壅塞_JJ | 路段_NN | 改道_VV | 行駛_VV | ，_PU | 行經_VV | 車_NN | 多_VA | 路段_NN | 請_VV | 保持_VV | 行車_NN | 安全_JJ | 距離_NN | ，_PU | 小心_AD | 行駛_VV | 。_PU

國道_NN | 車多_AD | 壅塞_VA | 路段_NN | 還_VV | 有_VE | 國_NN | 1內湖_NR | -_PU | 五_NR | 堵北_NR | 向_JJ | 路段_NN | 、_PU | 楊梅_NR | -_PU | 新竹_NR | 南向_JJ | 路段_NN | ；_PU | 國3三_NR | 鶯_NR | -_PU | 關西_NR | 服務_NN | 區南_NN | 向_JJ | 路段_NN | 、_PU | 快官_NR | -_PU | 霧峰_NR | 南向_JJ | 路段_NN | 、_PU | 水上_NR | 系統_NN | -_PU | 中_NR | 埔北_NR | 向_JJ | 路段_NN | ；_PU | 國6_OD | 霧峰_NR | 系統_NN | -_PU | 東草_NR | 屯東_NR | 向_JJ | 路段_NN | 、_PU | 國10_NR | 燕巢_NR | -_PU | 燕巢_NR | 系_NN | 統東_NN | 向_JJ | 路段_NN | 。_PU
</pre></div>
</div>
</div>
</div>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>Please read the <a class="reference external" href="https://spacy.io/usage/linguistic-features">documentation of <code class="docutils literal notranslate"><span class="pre">spacy</span></code></a> very carefully for additional ways to extract other useful linguistic properties.</p>
<p>You may need that for the assignments.</p>
</div>
</div>
</div>
<div class="section" id="conclusion">
<h2>Conclusion<a class="headerlink" href="#conclusion" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>Different segmenters have very different behaviors.</p></li>
<li><p>The choice of a proper segmenter may boil down to the following crucial questions:</p>
<ul>
<li><p>How do we evaluate the segmenter’s performance?</p></li>
<li><p>What is the objective of getting the word boundaries?</p></li>
<li><p>What is a word in Chinese?</p></li>
</ul>
</li>
</ul>
</div>
</div>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            kernelName: "python-notes",
            path: "./nlp"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python-notes'</script>

              </div>
              
        </div>
    </div>
    
    
    <div class='prev-next-bottom'>
        
    <a class='left-prev' id="prev-link" href="text-enrichment.html" title="previous page">Text Enrichment</a>
    <a class='right-next' id="next-link" href="google-colab.html" title="next page">Google Colab</a>

    </div>
    <footer class="footer mt-5 mt-md-0">
    <div class="container">
      <p>
        
          By Alvin Chen<br/>
        
            &copy; Copyright 2020 Alvin Chen.<br/>
      </p>
    </div>
  </footer>
</main>


      </div>
    </div>

    
  <script src="../_static/js/index.d3f166471bb80abb5163.js"></script>


    
  </body>
</html>