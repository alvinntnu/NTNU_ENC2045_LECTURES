

<!DOCTYPE html>


<html lang="en" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Chinese Word Segmentation &#8212; ENC2045 Computational Linguistics</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=e353d410970836974a52" rel="stylesheet" />
<link href="../_static/styles/bootstrap.css?digest=e353d410970836974a52" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css?digest=e353d410970836974a52" rel="stylesheet" />

  
  <link href="../_static/vendor/fontawesome/6.1.2/css/all.min.css?digest=e353d410970836974a52" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" href="../_static/styles/sphinx-book-theme.css?digest=14f4ca6b54d191a8c7657f6c759bf11a5fb86285" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../_static/mycss.css" />
    <link rel="stylesheet" type="text/css" href="../_static/design-style.4045f2051d55cab465a707391d5b2007.min.css" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=e353d410970836974a52" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=e353d410970836974a52" />

    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script src="../_static/scripts/sphinx-book-theme.js?digest=5a5c038af52cf7bc1a1ec88eea08e6366ee68824"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../_static/togglebutton.js"></script>
    <script async="async" kind="hypothesis" src="https://hypothes.is/embed.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../_static/design-tabs.js"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"
const thebe_selector = ".thebe,.cell"
const thebe_selector_input = "pre"
const thebe_selector_output = ".output, .cell_output"
</script>
    <script async="async" src="../_static/sphinx-thebe.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'nlp/chinese-word-seg';</script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Google Colab" href="google-colab.html" />
    <link rel="prev" title="Text Enrichment" href="text-enrichment.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <a class="skip-link" href="#main-content">Skip to main content</a>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__primary"
          id="__primary"/>
  <label class="overlay overlay-primary" for="__primary"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__secondary"
          id="__secondary"/>
  <label class="overlay overlay-secondary" for="__secondary"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>
  
    <nav class="bd-header navbar navbar-expand-lg bd-navbar">
    </nav>
  
  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">
  

<a class="navbar-brand logo" href="../intro.html">
  
  
  
  
    
    
      
    
    
    <img src="../_static/ntnu-word-2.png" class="logo__image only-light" alt="Logo image"/>
    <script>document.write(`<img src="../_static/ntnu-word-2.png" class="logo__image only-dark" alt="Logo image"/>`);</script>
  
  
</a></div>
        <div class="sidebar-primary-item"><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        <p aria-level="2" class="caption" role="heading"><span class="caption-text">INTRODUCTION</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="nlp-primer.html">Natural Language Processing: A Primer</a></li>
<li class="toctree-l1"><a class="reference internal" href="nlp-pipeline.html">NLP Pipeline</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Preprocessing</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1 current active has-children"><a class="reference internal" href="text-preprocessing.html">Text Preprocessing</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-1"><i class="fa-solid fa-chevron-down"></i></label><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="text-normalization-eng.html">Text Normalization</a></li>
<li class="toctree-l2"><a class="reference internal" href="text-tokenization.html">Text Tokenization</a></li>
<li class="toctree-l2"><a class="reference internal" href="text-enrichment.html">Text Enrichment</a></li>
<li class="toctree-l2 current active"><a class="current reference internal" href="#">Chinese Word Segmentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="google-colab.html">Google Colab</a></li>
</ul>
</li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Text Vectorization</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="text-vec-traditional.html">Text Vectorization Using Traditional Methods</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Machine Learning Basics</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="ml-overview.html">Machine Learning: Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="ml-simple-case.html">Machine Learning: A Simple Example</a></li>
<li class="toctree-l1"><a class="reference internal" href="ml-algorithm.html">Classification Models</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Machine-Learning NLP</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="ml-sklearn-classification.html">Sentiment Analysis Using Bag-of-Words</a></li>
<li class="toctree-l1"><a class="reference internal" href="ml-emsemble-learning.html">Emsemble Learning</a></li>
<li class="toctree-l1"><a class="reference internal" href="topic-modeling-naive.html">Topic Modeling: A Naive Example</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Deep Learning NLP</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="dl-neural-network-from-scratch.html">Neural Network From Scratch</a></li>
<li class="toctree-l1"><a class="reference internal" href="dl-simple-case.html">Deep Learning: A Simple Example</a></li>
<li class="toctree-l1"><a class="reference internal" href="dl-sentiment-case.html">Deep Learning: Sentiment Analysis</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Neural Language Model and Embeddings</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="dl-sequence-models-intuition.html">Sequence Models Intuition</a></li>
<li class="toctree-l1"><a class="reference internal" href="dl-neural-language-model-primer.html">Neural Language Model: A Start</a></li>
<li class="toctree-l1"><a class="reference internal" href="text-vec-embedding.html">Word Embeddings</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Sequence Models, Attention, Transformers</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="dl-attention-transformer-intuition.html">Attention and Transformers: Intuitions</a></li>
<li class="toctree-l1"><a class="reference internal" href="dl-seq-to-seq-attention-addition.html">Sequence Model with Attention for Addition Learning</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">LLM</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="langchain-llm-intro.html">Large Language Model (Under Construction…)</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Exercises</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../exercise/1-python-basics.html">1. Assignment I: Python Basics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../exercise/3-preprocessing.html">2. Assignment II: Preprocessing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../exercise/4-chinese-nlp.html">3. Assignment III: Chinese Language Processing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../exercise/5-text-vectorization.html">4. Assignment IV: Text Vectorization</a></li>
<li class="toctree-l1"><a class="reference internal" href="../exercise/6-machine-learning.html">5. Assignment V: Machine Learning</a></li>
<li class="toctree-l1"><a class="reference internal" href="../exercise/7-topic-modeling.html">6. Assignment VI: Topic Modeling</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><label class="sidebar-toggle primary-toggle btn btn-sm" for="__primary" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</label></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-launch-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Launch interactive content">
    <i class="fas fa-rocket"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://colab.research.google.com/github/alvinntnu/NTNU_ENC2045_LECTURES/blob/main/nlp/chinese-word-seg.ipynb" target="_blank"
   class="btn btn-sm dropdown-item"
   title="Launch onColab"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  
    <img src="../_static/images/logo_colab.png">
  </span>
<span class="btn__text-container">Colab</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="../_sources/nlp/chinese-word-seg.ipynb" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.ipynb</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>


<script>
document.write(`
  <button class="theme-switch-button btn btn-sm btn-outline-primary navbar-btn rounded-circle" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch" data-mode="light"><i class="fa-solid fa-sun"></i></span>
    <span class="theme-switch" data-mode="dark"><i class="fa-solid fa-moon"></i></span>
    <span class="theme-switch" data-mode="auto"><i class="fa-solid fa-circle-half-stroke"></i></span>
  </button>
`);
</script>

<script>
document.write(`
  <button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
  </button>
`);
</script>
<label class="sidebar-toggle secondary-toggle btn btn-sm" for="__secondary"title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</label>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Chinese Word Segmentation</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#segmentation-using-jieba">Segmentation using <code class="docutils literal notranslate"><span class="pre">jieba</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#segmentation-using-ckip-transformer">Segmentation using CKIP Transformer</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#challenges-of-word-segmentation">Challenges of Word Segmentation</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#other-modules-for-chinese-word-segmentation">Other Modules for Chinese Word Segmentation</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#chinese-nlp-using-spacy">Chinese NLP Using <code class="docutils literal notranslate"><span class="pre">spacy</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#visualizing-linguistic-features">Visualizing linguistic features</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#conclusion">Conclusion</a></li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article" role="main">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="chinese-word-segmentation">
<h1>Chinese Word Segmentation<a class="headerlink" href="#chinese-word-segmentation" title="Permalink to this headline">#</a></h1>
<ul class="simple">
<li><p>Natural language processing methods are connected to the characteristics of the target language.</p></li>
<li><p>To deal with the Chinese language, the most intimidating task is to determine a basic <strong>linguistic unit</strong> to work with.</p></li>
<li><p>In this tutorial, we will talk about a few <strong>word segmentation</strong> methods in python.</p></li>
</ul>
<section id="segmentation-using-jieba">
<h2>Segmentation using <code class="docutils literal notranslate"><span class="pre">jieba</span></code><a class="headerlink" href="#segmentation-using-jieba" title="Permalink to this headline">#</a></h2>
<ul class="simple">
<li><p>Before we start, if you haven’t installed the module, please install it as follows:</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ conda activate python-notes
$ pip install jieba
</pre></div>
</div>
<ul class="simple">
<li><p>Check the module documentation for more detail: <a class="reference external" href="https://github.com/fxsjy/jieba"><code class="docutils literal notranslate"><span class="pre">jieba</span></code></a></p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">jieba</span>
<span class="n">text</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;</span>
<span class="s2">高速公路局說，目前在國道3號北向水上系統至中埔路段車多壅塞，已回堵約3公里。另外，國道1號北向仁德至永康路段路段，已回堵約有7公里。建議駕駛人提前避開壅塞路段改道行駛，行經車多路段請保持行車安全距離，小心行駛。</span>
<span class="s2">國道車多壅塞路段還有國1內湖-五堵北向路段、楊梅-新竹南向路段；國3三鶯-關西服務區南向路段、快官-霧峰南向路段、水上系統-中埔北向路段；國6霧峰系統-東草屯東向路段、國10燕巢-燕巢系統東向路段。</span>
<span class="s2">&quot;&quot;&quot;</span>
<span class="n">text_jb</span> <span class="o">=</span> <span class="n">jieba</span><span class="o">.</span><span class="n">lcut</span><span class="p">(</span><span class="n">text</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39; | &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">text_jb</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span> | 高速公路 | 局說 | ， | 目前 | 在 | 國道 | 3 | 號 | 北向 | 水上 | 系統 | 至 | 中埔 | 路段 | 車多 | 壅塞 | ， | 已回 | 堵約 | 3 | 公里 | 。 | 另外 | ， | 國道 | 1 | 號 | 北向 | 仁德 | 至 | 永康 | 路段 | 路段 | ， | 已回 | 堵 | 約 | 有 | 7 | 公里 | 。 | 建議 | 駕駛人 | 提前 | 避開 | 壅塞 | 路段 | 改道 | 行駛 | ， | 行經車 | 多 | 路段 | 請 | 保持 | 行車 | 安全 | 距離 | ， | 小心 | 行駛 | 。 | 
 | 國道 | 車多 | 壅塞 | 路段 | 還有國 | 1 | 內湖 | - | 五堵 | 北向 | 路段 | 、 | 楊梅 | - | 新竹 | 南向 | 路段 | ； | 國 | 3 | 三鶯 | - | 關 | 西服 | 務區 | 南向 | 路段 | 、 | 快官 | - | 霧峰 | 南向 | 路段 | 、 | 水上 | 系統 | - | 中埔 | 北向 | 路段 | ； | 國 | 6 | 霧峰 | 系統 | - | 東 | 草屯 | 東向 | 路段 | 、 | 國 | 10 | 燕巢 | - | 燕巢 | 系統 | 東向 | 路段 | 。 | 
</pre></div>
</div>
</div>
</div>
<ul class="simple">
<li><p>Initialize traditional Chinese dictionary</p>
<ul>
<li><p>Download the traditional chinese dictionary from <a class="reference external" href="https://raw.githubusercontent.com/ldkrsi/jieba-zh_TW/master/jieba/dict.txt"><code class="docutils literal notranslate"><span class="pre">jieba-tw</span></code></a></p></li>
</ul>
</li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">jieba</span><span class="o">.</span><span class="n">set_dictionary</span><span class="p">(</span><span class="n">file_path</span><span class="p">)</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Add own project-specific dictionary</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">jieba</span><span class="o">.</span><span class="n">load_userdict</span><span class="p">(</span><span class="n">file_path</span><span class="p">)</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>For the user-defined dictionary, it should be a txt file, where each line includes a new word, its frequency (optional), and POS tags (optional). The word’s values are separated by white-spaces.</p>
</div>
<ul class="simple">
<li><p>Add ad-hoc words to dictionary</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">jieba</span><span class="o">.</span><span class="n">add_word</span><span class="p">(</span><span class="n">word</span><span class="p">,</span> <span class="n">freq</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">tag</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Remove words</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">jieba</span><span class="o">.</span><span class="n">del_word</span><span class="p">(</span><span class="n">word</span><span class="p">)</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Word segmentation</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">jieba.cut()</span></code> returns a <code class="docutils literal notranslate"><span class="pre">generator</span></code> object</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">jieba.lcut()</span></code> resuts a <code class="docutils literal notranslate"><span class="pre">List</span></code> object</p></li>
</ul>
</li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># full</span>

<span class="n">jieba</span><span class="o">.</span><span class="n">cut</span><span class="p">(</span><span class="n">TEXT</span><span class="p">,</span> <span class="n">cut_all</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">jieba</span><span class="o">.</span><span class="n">lcut</span><span class="p">(</span><span class="n">TEXT</span><span class="p">,</span> <span class="n">cut_all</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="c1"># default</span>
<span class="n">jieba</span><span class="o">.</span><span class="n">cut</span><span class="p">(</span><span class="n">TEXT</span><span class="p">,</span> <span class="n">cut_all</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="n">jieba</span><span class="o">.</span><span class="n">lcut</span><span class="p">(</span><span class="n">TEXT</span><span class="p">,</span> <span class="n">cut_all</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</pre></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># `cut_all`: True for full pattern; False for accurate pattern.</span>

<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;|&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">jieba</span><span class="o">.</span><span class="n">cut</span><span class="p">(</span><span class="n">text</span><span class="p">,</span> <span class="n">cut_all</span><span class="o">=</span><span class="kc">False</span><span class="p">)))</span> <span class="c1">## default accurate pattern</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;|&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">jieba</span><span class="o">.</span><span class="n">cut</span><span class="p">(</span><span class="n">text</span><span class="p">,</span> <span class="n">cut_all</span><span class="o">=</span><span class="kc">True</span><span class="p">)))</span> <span class="c1">## full pattern</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>|高速公路|局說|，|目前|在|國道|3|號|北向|水上|系統|至|中埔|路段|車多|壅塞|，|已回|堵約|3|公里|。|另外|，|國道|1|號|北向|仁德|至|永康|路段|路段|，|已回|堵|約|有|7|公里|。|建議|駕駛人|提前|避開|壅塞|路段|改道|行駛|，|行經車|多|路段|請|保持|行車|安全|距離|，|小心|行駛|。|
|國道|車多|壅塞|路段|還有國|1|內湖|-|五堵|北向|路段|、|楊梅|-|新竹|南向|路段|；|國|3|三鶯|-|關|西服|務區|南向|路段|、|快官|-|霧峰|南向|路段|、|水上|系統|-|中埔|北向|路段|；|國|6|霧峰|系統|-|東|草屯|東向|路段|、|國|10|燕巢|-|燕巢|系統|東向|路段|。|

|
||高速|高速公路|公路|公路局|路局|說|，|目前|在|國|道|3|號|北向|水上|系|統|至|中|埔|路段|車|多|壅塞|，|已|回|堵|約|3|公里|。|另外|，|國|道|1|號|北向|仁德|至|永康|康路|路段|路段|，|已|回|堵|約|有|7|公里|。|建|議|駕|駛|人|提前|避|開|壅塞|路段|改道|道行|駛|，|行|經|車|多路|路段|請|保持|行|車|安全|全距|離|，|小心|行|駛|。|
||國|道|車|多|壅塞|路段|還|有|國|1|內|湖|-|五堵|北向|路段|、|楊|梅|-|新竹|竹南|南向|路段|；|國|3|三|鶯|-|關|西服|務|區|南向|路段|、|快|官|-|霧|峰|南向|路段|、|水上|系|統|-|中|埔|北向|路段|；|國|6|霧|峰|系|統|-|東|草屯|東|向|路段|、|國|10|燕巢|-|燕巢|系|統|東|向|路段|。|
|
</pre></div>
</div>
</div>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p>In the <code class="docutils literal notranslate"><span class="pre">jieba.cut()</span></code> function of the Jieba Python library, the <code class="docutils literal notranslate"><span class="pre">cut_all</span></code> parameter determines whether to use the full mode or the accurate mode for word segmentation.</p>
<p>Here’s what each mode means:</p>
<ol class="arabic simple">
<li><p><strong>Full Mode (<code class="docutils literal notranslate"><span class="pre">cut_all=True</span></code>):</strong></p>
<ul class="simple">
<li><p>In full mode, Jieba attempts to segment the text into all possible words and returns a list of all possible word combinations, regardless of whether they are valid words or not.</p></li>
<li><p>This mode is more aggressive and may result in a larger number of word segments, including many short and meaningless combinations.</p></li>
<li><p>It’s useful when dealing with text containing colloquial language, slang, or incomplete sentences, as it tries to segment the text into as many words as possible.</p></li>
</ul>
</li>
<li><p><strong>Accurate Mode (<code class="docutils literal notranslate"><span class="pre">cut_all=False</span></code> or not specifying <code class="docutils literal notranslate"><span class="pre">cut_all</span></code>):</strong></p>
<ul class="simple">
<li><p>In accurate mode, Jieba uses a more precise algorithm to segment the text into meaningful words based on a predefined dictionary of words.</p></li>
<li><p>This mode is more conservative and typically results in fewer word segments compared to the full mode.</p></li>
<li><p>It’s suitable for general-purpose text segmentation tasks where accurate word segmentation is desired.</p></li>
</ul>
</li>
</ol>
</div>
</section>
<section id="segmentation-using-ckip-transformer">
<h2>Segmentation using CKIP Transformer<a class="headerlink" href="#segmentation-using-ckip-transformer" title="Permalink to this headline">#</a></h2>
<ul class="simple">
<li><p>For more detail on the installation of <code class="docutils literal notranslate"><span class="pre">ckip-transformers</span></code>, please read their <a class="reference external" href="https://github.com/ckiplab/ckip-transformers">documentation</a>.</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="o">-</span><span class="n">U</span> <span class="n">ckip</span><span class="o">-</span><span class="n">transformers</span>
</pre></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">## Colab Only</span>
<span class="o">!</span>pip<span class="w"> </span>install<span class="w"> </span>-U<span class="w"> </span>ckip-transformers
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Collecting ckip-transformers
  Downloading ckip_transformers-0.3.4-py3-none-any.whl (26 kB)
Requirement already satisfied: torch&gt;=1.5.0 in /usr/local/lib/python3.10/dist-packages (from ckip-transformers) (2.1.0+cu121)
Requirement already satisfied: tqdm&gt;=4.27 in /usr/local/lib/python3.10/dist-packages (from ckip-transformers) (4.66.2)
Requirement already satisfied: transformers&gt;=3.5.0 in /usr/local/lib/python3.10/dist-packages (from ckip-transformers) (4.37.2)
Requirement already satisfied: filelock in /usr/local/lib/python3.10/dist-packages (from torch&gt;=1.5.0-&gt;ckip-transformers) (3.13.1)
Requirement already satisfied: typing-extensions in /usr/local/lib/python3.10/dist-packages (from torch&gt;=1.5.0-&gt;ckip-transformers) (4.9.0)
Requirement already satisfied: sympy in /usr/local/lib/python3.10/dist-packages (from torch&gt;=1.5.0-&gt;ckip-transformers) (1.12)
Requirement already satisfied: networkx in /usr/local/lib/python3.10/dist-packages (from torch&gt;=1.5.0-&gt;ckip-transformers) (3.2.1)
Requirement already satisfied: jinja2 in /usr/local/lib/python3.10/dist-packages (from torch&gt;=1.5.0-&gt;ckip-transformers) (3.1.3)
Requirement already satisfied: fsspec in /usr/local/lib/python3.10/dist-packages (from torch&gt;=1.5.0-&gt;ckip-transformers) (2023.6.0)
Requirement already satisfied: triton==2.1.0 in /usr/local/lib/python3.10/dist-packages (from torch&gt;=1.5.0-&gt;ckip-transformers) (2.1.0)
Requirement already satisfied: huggingface-hub&lt;1.0,&gt;=0.19.3 in /usr/local/lib/python3.10/dist-packages (from transformers&gt;=3.5.0-&gt;ckip-transformers) (0.20.3)
Requirement already satisfied: numpy&gt;=1.17 in /usr/local/lib/python3.10/dist-packages (from transformers&gt;=3.5.0-&gt;ckip-transformers) (1.25.2)
Requirement already satisfied: packaging&gt;=20.0 in /usr/local/lib/python3.10/dist-packages (from transformers&gt;=3.5.0-&gt;ckip-transformers) (23.2)
Requirement already satisfied: pyyaml&gt;=5.1 in /usr/local/lib/python3.10/dist-packages (from transformers&gt;=3.5.0-&gt;ckip-transformers) (6.0.1)
Requirement already satisfied: regex!=2019.12.17 in /usr/local/lib/python3.10/dist-packages (from transformers&gt;=3.5.0-&gt;ckip-transformers) (2023.12.25)
Requirement already satisfied: requests in /usr/local/lib/python3.10/dist-packages (from transformers&gt;=3.5.0-&gt;ckip-transformers) (2.31.0)
Requirement already satisfied: tokenizers&lt;0.19,&gt;=0.14 in /usr/local/lib/python3.10/dist-packages (from transformers&gt;=3.5.0-&gt;ckip-transformers) (0.15.2)
Requirement already satisfied: safetensors&gt;=0.4.1 in /usr/local/lib/python3.10/dist-packages (from transformers&gt;=3.5.0-&gt;ckip-transformers) (0.4.2)
Requirement already satisfied: MarkupSafe&gt;=2.0 in /usr/local/lib/python3.10/dist-packages (from jinja2-&gt;torch&gt;=1.5.0-&gt;ckip-transformers) (2.1.5)
Requirement already satisfied: charset-normalizer&lt;4,&gt;=2 in /usr/local/lib/python3.10/dist-packages (from requests-&gt;transformers&gt;=3.5.0-&gt;ckip-transformers) (3.3.2)
Requirement already satisfied: idna&lt;4,&gt;=2.5 in /usr/local/lib/python3.10/dist-packages (from requests-&gt;transformers&gt;=3.5.0-&gt;ckip-transformers) (3.6)
Requirement already satisfied: urllib3&lt;3,&gt;=1.21.1 in /usr/local/lib/python3.10/dist-packages (from requests-&gt;transformers&gt;=3.5.0-&gt;ckip-transformers) (2.0.7)
Requirement already satisfied: certifi&gt;=2017.4.17 in /usr/local/lib/python3.10/dist-packages (from requests-&gt;transformers&gt;=3.5.0-&gt;ckip-transformers) (2024.2.2)
Requirement already satisfied: mpmath&gt;=0.19 in /usr/local/lib/python3.10/dist-packages (from sympy-&gt;torch&gt;=1.5.0-&gt;ckip-transformers) (1.3.0)
Installing collected packages: ckip-transformers
Successfully installed ckip-transformers-0.3.4
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">ckip_transformers</span>
<span class="kn">from</span> <span class="nn">ckip_transformers.nlp</span> <span class="kn">import</span> <span class="n">CkipWordSegmenter</span><span class="p">,</span> <span class="n">CkipPosTagger</span><span class="p">,</span> <span class="n">CkipNerChunker</span>
</pre></div>
</div>
</div>
</div>
<ul class="simple">
<li><p>When initializing the models, <code class="docutils literal notranslate"><span class="pre">level</span></code> specifies three levels of segmentation resolution. Level 1 is the fastest while Level 3 is the most accurate</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">device</span> <span class="pre">=</span> <span class="pre">0</span></code> for GPU computing.</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">%%time</span>

<span class="c1"># Initialize drivers</span>
<span class="n">ws_driver</span> <span class="o">=</span> <span class="n">CkipWordSegmenter</span><span class="p">(</span><span class="n">model</span><span class="o">=</span><span class="s2">&quot;bert-base&quot;</span><span class="p">,</span> <span class="n">device</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="n">pos_driver</span> <span class="o">=</span> <span class="n">CkipPosTagger</span><span class="p">(</span><span class="n">model</span><span class="o">=</span><span class="s2">&quot;bert-base&quot;</span><span class="p">,</span> <span class="n">device</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="n">ner_driver</span> <span class="o">=</span> <span class="n">CkipNerChunker</span><span class="p">(</span><span class="n">model</span><span class="o">=</span><span class="s2">&quot;bert-base&quot;</span><span class="p">,</span> <span class="n">device</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>/usr/local/lib/python3.10/dist-packages/huggingface_hub/utils/_token.py:88: UserWarning: 
The secret `HF_TOKEN` does not exist in your Colab secrets.
To authenticate with the Hugging Face Hub, create a token in your settings tab (https://huggingface.co/settings/tokens), set it as secret in your Google Colab and restart your session.
You will be able to reuse this secret in all of your notebooks.
Please note that authentication is recommended but still optional to access public models or datasets.
  warnings.warn(
</pre></div>
</div>
<script type="application/vnd.jupyter.widget-view+json">{"model_id": "8ee2f8c98d79408d82ba406c49823638", "version_major": 2, "version_minor": 0}</script><script type="application/vnd.jupyter.widget-view+json">{"model_id": "7902ebf5e4a348d99ebc86d0e5bc7fba", "version_major": 2, "version_minor": 0}</script><div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>/usr/local/lib/python3.10/dist-packages/torch/_utils.py:831: UserWarning: TypedStorage is deprecated. It will be removed in the future and UntypedStorage will be the only storage class. This should only matter to you if you are using storages directly.  To access UntypedStorage directly, use tensor.untyped_storage() instead of tensor.storage()
  return self.fget.__get__(instance, owner)()
</pre></div>
</div>
<script type="application/vnd.jupyter.widget-view+json">{"model_id": "0143a787bd25497ca831551dd00f0980", "version_major": 2, "version_minor": 0}</script><script type="application/vnd.jupyter.widget-view+json">{"model_id": "6b6fbaada8e34da3b58da857a1022222", "version_major": 2, "version_minor": 0}</script><script type="application/vnd.jupyter.widget-view+json">{"model_id": "c696e69e6bbe46d986b4392c33f9cf98", "version_major": 2, "version_minor": 0}</script><script type="application/vnd.jupyter.widget-view+json">{"model_id": "c59100b991aa4ffdbb3de5d6df65a496", "version_major": 2, "version_minor": 0}</script><script type="application/vnd.jupyter.widget-view+json">{"model_id": "0a8ce46d1e2041eaa4699fc6dd5a04dc", "version_major": 2, "version_minor": 0}</script><script type="application/vnd.jupyter.widget-view+json">{"model_id": "df770008cf7c4e0fbd093ab26b015045", "version_major": 2, "version_minor": 0}</script><script type="application/vnd.jupyter.widget-view+json">{"model_id": "fe4adaafe15b4688a207ee90f558a409", "version_major": 2, "version_minor": 0}</script><script type="application/vnd.jupyter.widget-view+json">{"model_id": "2d57d028a6cf474687326792bb5a85f6", "version_major": 2, "version_minor": 0}</script><script type="application/vnd.jupyter.widget-view+json">{"model_id": "b14384a94f6e4db09c572f7a3ed09341", "version_major": 2, "version_minor": 0}</script><script type="application/vnd.jupyter.widget-view+json">{"model_id": "33305bc769934e9a848d3930f923b13b", "version_major": 2, "version_minor": 0}</script><script type="application/vnd.jupyter.widget-view+json">{"model_id": "f990d45fd7644620ad0c3c19eae1b14a", "version_major": 2, "version_minor": 0}</script><script type="application/vnd.jupyter.widget-view+json">{"model_id": "3df8bbdb80c34b508712fd535a0c62fb", "version_major": 2, "version_minor": 0}</script><script type="application/vnd.jupyter.widget-view+json">{"model_id": "e00a5b8453694bd8ab65a439e0c2150d", "version_major": 2, "version_minor": 0}</script><div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>CPU times: user 3.59 s, sys: 3.43 s, total: 7.02 s
Wall time: 22.2 s
</pre></div>
</div>
</div>
</div>
<ul class="simple">
<li><p>We usually break the texts into smaller chunks for word segmentation.</p></li>
<li><p>But how we break the texts can be tricky.</p>
<ul>
<li><p>Paragraph breaks?</p></li>
<li><p>Chunks based on period-like punctuations?</p></li>
<li><p>Chunks based on some other delimiters?</p></li>
</ul>
</li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Input text</span>
<span class="n">text</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;</span>
<span class="s2">高速公路局說，目前在國道3號北向水上系統至中埔路段車多壅塞，已回堵約3公里。另外，國道1號北向仁德至永康路段路段，已回堵約有7公里。建議駕駛人提前避開壅塞路段改道行駛，行經車多路段請保持行車安全距離，小心行駛。</span>
<span class="s2">國道車多壅塞路段還有國1內湖-五堵北向路段、楊梅-新竹南向路段；國3三鶯-關西服務區南向路段、快官-霧峰南向路段、水上系統-中埔北向路段；國6霧峰系統-東草屯東向路段、國10燕巢-燕巢系統東向路段。</span>
<span class="s2">&quot;&quot;&quot;</span>

<span class="c1"># paragraph breaks</span>
<span class="n">text</span> <span class="o">=</span> <span class="p">[</span><span class="n">p</span> <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">text</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span> <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">p</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">]</span>
<span class="nb">print</span><span class="p">(</span><span class="n">text</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[&#39;高速公路局說，目前在國道3號北向水上系統至中埔路段車多壅塞，已回堵約3公里。另外，國道1號北向仁德至永康路段路段，已回堵約有7公里。建議駕駛人提前避開壅塞路段改道行駛，行經車多路段請保持行車安全距離，小心行駛。&#39;, &#39;國道車多壅塞路段還有國1內湖-五堵北向路段、楊梅-新竹南向路段；國3三鶯-關西服務區南向路段、快官-霧峰南向路段、水上系統-中埔北向路段；國6霧峰系統-東草屯東向路段、國10燕巢-燕巢系統東向路段。&#39;]
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Run pipeline</span>
<span class="n">ws</span> <span class="o">=</span> <span class="n">ws_driver</span><span class="p">(</span><span class="n">text</span><span class="p">)</span>
<span class="n">pos</span> <span class="o">=</span> <span class="n">pos_driver</span><span class="p">(</span><span class="n">ws</span><span class="p">)</span>
<span class="n">ner</span> <span class="o">=</span> <span class="n">ner_driver</span><span class="p">(</span><span class="n">text</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Tokenization: 100%|██████████| 2/2 [00:00&lt;00:00, 1053.85it/s]
Inference: 100%|██████████| 1/1 [00:01&lt;00:00,  1.68s/it]
Tokenization: 100%|██████████| 2/2 [00:00&lt;00:00, 3837.42it/s]
Inference: 100%|██████████| 1/1 [00:00&lt;00:00, 22.82it/s]
Tokenization: 100%|██████████| 2/2 [00:00&lt;00:00, 1839.20it/s]
Inference: 100%|██████████| 1/1 [00:00&lt;00:00, 36.79it/s]
</pre></div>
</div>
</div>
</div>
<ul class="simple">
<li><p>When doing the word segmentation, there are a few parameters to consider in <code class="docutils literal notranslate"><span class="pre">ws_driver()</span></code>:</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">use_delim</span></code>: by default, ckip transformer breaks the texts into sentences using the following delimiters <code class="docutils literal notranslate"><span class="pre">'，,。：:；;！!？?'</span></code>, and concatenate them back in the outputs.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">delim_set</span></code>: to specify self-defined sentence delimiters</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">batch_size</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">max_length</span></code></p></li>
</ul>
</li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Enable sentence segmentation</span>
<span class="n">ws</span> <span class="o">=</span> <span class="n">ws_driver</span><span class="p">(</span><span class="n">text</span><span class="p">,</span> <span class="n">use_delim</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">ner</span> <span class="o">=</span> <span class="n">ner_driver</span><span class="p">(</span><span class="n">text</span><span class="p">,</span> <span class="n">use_delim</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Tokenization: 100%|██████████| 2/2 [00:00&lt;00:00, 1773.49it/s]
Inference: 100%|██████████| 1/1 [00:00&lt;00:00, 22.89it/s]
Tokenization: 100%|██████████| 2/2 [00:00&lt;00:00, 1828.38it/s]
Inference: 100%|██████████| 1/1 [00:00&lt;00:00, 23.02it/s]
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Disable sentence segmentation</span>
<span class="n">pos</span> <span class="o">=</span> <span class="n">pos_driver</span><span class="p">(</span><span class="n">ws</span><span class="p">,</span> <span class="n">use_delim</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

<span class="c1"># Use new line characters and tabs for sentence segmentation</span>
<span class="n">pos</span> <span class="o">=</span> <span class="n">pos_driver</span><span class="p">(</span><span class="n">ws</span><span class="p">,</span> <span class="n">delim_set</span><span class="o">=</span><span class="s1">&#39;</span><span class="se">\n\t</span><span class="s1">&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Tokenization: 100%|██████████| 2/2 [00:00&lt;00:00, 1971.01it/s]
Inference: 100%|██████████| 1/1 [00:00&lt;00:00, 46.98it/s]
Tokenization: 100%|██████████| 2/2 [00:00&lt;00:00, 1895.30it/s]
Inference: 100%|██████████| 1/1 [00:00&lt;00:00, 43.99it/s]
</pre></div>
</div>
</div>
</div>
<ul class="simple">
<li><p>A quick comparison of the results based on <code class="docutils literal notranslate"><span class="pre">jieba</span></code> and <code class="docutils literal notranslate"><span class="pre">ckip-transomers</span></code>:</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="s1">&#39; | &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">text_jb</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span> | 高速公路 | 局說 | ， | 目前 | 在 | 國道 | 3 | 號 | 北向 | 水上 | 系統 | 至 | 中埔 | 路段 | 車多 | 壅塞 | ， | 已回 | 堵約 | 3 | 公里 | 。 | 另外 | ， | 國道 | 1 | 號 | 北向 | 仁德 | 至 | 永康 | 路段 | 路段 | ， | 已回 | 堵 | 約 | 有 | 7 | 公里 | 。 | 建議 | 駕駛人 | 提前 | 避開 | 壅塞 | 路段 | 改道 | 行駛 | ， | 行經車 | 多 | 路段 | 請 | 保持 | 行車 | 安全 | 距離 | ， | 小心 | 行駛 | 。 | 
 | 國道 | 車多 | 壅塞 | 路段 | 還有國 | 1 | 內湖 | - | 五堵 | 北向 | 路段 | 、 | 楊梅 | - | 新竹 | 南向 | 路段 | ； | 國 | 3 | 三鶯 | - | 關 | 西服 | 務區 | 南向 | 路段 | 、 | 快官 | - | 霧峰 | 南向 | 路段 | 、 | 水上 | 系統 | - | 中埔 | 北向 | 路段 | ； | 國 | 6 | 霧峰 | 系統 | - | 東 | 草屯 | 東向 | 路段 | 、 | 國 | 10 | 燕巢 | - | 燕巢 | 系統 | 東向 | 路段 | 。 | 
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n\n</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="s1">&#39; | &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">p</span><span class="p">)</span> <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">ws</span><span class="p">]))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>高速 | 公路局 | 說 | ， | 目前 | 在 | 國道 | 3號 | 北向 | 水上 | 系統 | 至 | 中埔 | 路段 | 車 | 多 | 壅塞 | ， | 已 | 回堵 | 約 | 3 | 公里 | 。 | 另外 | ， | 國道 | 1號 | 北 | 向 | 仁德 | 至 | 永康 | 路段 | 路段 | ， | 已 | 回堵 | 約 | 有 | 7 | 公里 | 。 | 建議 | 駕駛人 | 提前 | 避開 | 壅塞 | 路段 | 改道 | 行駛 | ， | 行經 | 車 | 多 | 路段 | 請 | 保持 | 行車 | 安全 | 距離 | ， | 小心 | 行駛 | 。

國道 | 車 | 多 | 壅塞 | 路段 | 還 | 有 | 國1 | 內湖 | - | 五堵 | 北向 | 路段 | 、 | 楊梅 | - | 新竹 | 南向 | 路段 | ； | 國3 | 三鶯 | - | 關西 | 服務區 | 南向 | 路段 | 、 | 快官 | - | 霧峰 | 南向 | 路段 | 、 | 水上 | 系統 | - | 中埔 | 北向 | 路段 | ； | 國6 | 霧峰 | 系統 | - | 東 | 草屯 | 東向 | 路段 | 、 | 國10 | 燕巢 | - | 燕巢 | 系統 | 東向 | 路段 | 。
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Pack word segmentation and part-of-speech results</span>
<span class="k">def</span> <span class="nf">pack_ws_pos_sentece</span><span class="p">(</span><span class="n">sentence_ws</span><span class="p">,</span> <span class="n">sentence_pos</span><span class="p">):</span>
    <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">sentence_ws</span><span class="p">)</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="n">sentence_pos</span><span class="p">)</span>
    <span class="n">res</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">word_ws</span><span class="p">,</span> <span class="n">word_pos</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">sentence_ws</span><span class="p">,</span> <span class="n">sentence_pos</span><span class="p">):</span>
        <span class="n">res</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">word_ws</span><span class="si">}</span><span class="s1">(</span><span class="si">{</span><span class="n">word_pos</span><span class="si">}</span><span class="s1">)&#39;</span><span class="p">)</span>
    <span class="k">return</span> <span class="s1">&#39;</span><span class="se">\u3000</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">res</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Show results</span>
<span class="k">for</span> <span class="n">sentence</span><span class="p">,</span> <span class="n">sentence_ws</span><span class="p">,</span> <span class="n">sentence_pos</span><span class="p">,</span> <span class="n">sentence_ner</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span>
        <span class="n">text</span><span class="p">,</span> <span class="n">ws</span><span class="p">,</span> <span class="n">pos</span><span class="p">,</span> <span class="n">ner</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">sentence</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">pack_ws_pos_sentece</span><span class="p">(</span><span class="n">sentence_ws</span><span class="p">,</span> <span class="n">sentence_pos</span><span class="p">))</span>
    <span class="k">for</span> <span class="n">entity</span> <span class="ow">in</span> <span class="n">sentence_ner</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">entity</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>高速公路局說，目前在國道3號北向水上系統至中埔路段車多壅塞，已回堵約3公里。另外，國道1號北向仁德至永康路段路段，已回堵約有7公里。建議駕駛人提前避開壅塞路段改道行駛，行經車多路段請保持行車安全距離，小心行駛。
高速(VH)　公路局(Nc)　說(VE)　，(COMMACATEGORY)　目前(Nd)　在(P)　國道(Nc)　3號(Neu)　北向(Nc)　水上(Nc)　系統(Na)　至(Caa)　中埔(Nc)　路段(Na)　車(Na)　多(D)　壅塞(VH)　，(COMMACATEGORY)　已(D)　回堵(VC)　約(Da)　3(Neu)　公里(Nf)　。(PERIODCATEGORY)　另外(Cbb)　，(COMMACATEGORY)　國道(Nc)　1號(Nc)　北(Ncd)　向(P)　仁德(Nc)　至(Caa)　永康(Nc)　路段(Na)　路段(Na)　，(COMMACATEGORY)　已(D)　回堵(VC)　約(Da)　有(V_2)　7(Neu)　公里(Nf)　。(PERIODCATEGORY)　建議(VE)　駕駛人(Na)　提前(VB)　避開(VC)　壅塞(VH)　路段(Na)　改道(VA)　行駛(VA)　，(COMMACATEGORY)　行經(VCL)　車(Na)　多(VH)　路段(Na)　請(VF)　保持(VJ)　行車(VA)　安全(VH)　距離(Na)　，(COMMACATEGORY)　小心(VK)　行駛(VA)　。(PERIODCATEGORY)
NerToken(word=&#39;高速公路局&#39;, ner=&#39;ORG&#39;, idx=(0, 5))
NerToken(word=&#39;國道3號&#39;, ner=&#39;FAC&#39;, idx=(10, 14))
NerToken(word=&#39;中埔&#39;, ner=&#39;GPE&#39;, idx=(21, 23))
NerToken(word=&#39;3公里&#39;, ner=&#39;QUANTITY&#39;, idx=(34, 37))
NerToken(word=&#39;國道1號&#39;, ner=&#39;FAC&#39;, idx=(41, 45))
NerToken(word=&#39;仁德&#39;, ner=&#39;GPE&#39;, idx=(47, 49))
NerToken(word=&#39;永康路段&#39;, ner=&#39;FAC&#39;, idx=(50, 54))
NerToken(word=&#39;7公里&#39;, ner=&#39;QUANTITY&#39;, idx=(62, 65))

國道車多壅塞路段還有國1內湖-五堵北向路段、楊梅-新竹南向路段；國3三鶯-關西服務區南向路段、快官-霧峰南向路段、水上系統-中埔北向路段；國6霧峰系統-東草屯東向路段、國10燕巢-燕巢系統東向路段。
國道(Na)　車(Na)　多(VH)　壅塞(VH)　路段(Na)　還(D)　有(V_2)　國1(Na)　內湖(Nc)　-(DASHCATEGORY)　五堵(Nc)　北向(Na)　路段(Na)　、(PAUSECATEGORY)　楊梅(Nc)　-(DASHCATEGORY)　新竹(Nc)　南向(Na)　路段(Na)　；(SEMICOLONCATEGORY)　國3(Na)　三鶯(Nc)　-(DASHCATEGORY)　關西(Nc)　服務區(Nc)　南向(A)　路段(Na)　、(PAUSECATEGORY)　快官(Na)　-(DASHCATEGORY)　霧峰(Nc)　南向(Nc)　路段(Na)　、(PAUSECATEGORY)　水上(Nc)　系統(Na)　-(DASHCATEGORY)　中埔(Nc)　北向(Na)　路段(Na)　；(SEMICOLONCATEGORY)　國6(Na)　霧峰(Nc)　系統(Na)　-(DASHCATEGORY)　東(Ncd)　草屯(Nc)　東向(Na)　路段(Na)　、(PAUSECATEGORY)　國10(Na)　燕巢(Nc)　-(DASHCATEGORY)　燕巢(Nc)　系統(Na)　東向(VH)　路段(Na)　。(PERIODCATEGORY)
NerToken(word=&#39;國道&#39;, ner=&#39;FAC&#39;, idx=(0, 2))
NerToken(word=&#39;國3三鶯-關西服務區&#39;, ner=&#39;FAC&#39;, idx=(32, 42))
NerToken(word=&#39;中埔&#39;, ner=&#39;GPE&#39;, idx=(62, 64))
NerToken(word=&#39;國6霧峰系統&#39;, ner=&#39;FAC&#39;, idx=(69, 75))
NerToken(word=&#39;東草屯東向路段&#39;, ner=&#39;FAC&#39;, idx=(76, 83))
NerToken(word=&#39;國10燕巢-燕巢系統&#39;, ner=&#39;FAC&#39;, idx=(84, 94))
</pre></div>
</div>
</div>
</div>
</section>
<section id="challenges-of-word-segmentation">
<h2>Challenges of Word Segmentation<a class="headerlink" href="#challenges-of-word-segmentation" title="Permalink to this headline">#</a></h2>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">text2</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s2">&quot;女人沒有她男人甚麼也不是&quot;</span><span class="p">,</span>
    <span class="s2">&quot;女人沒有了男人將會一無所有&quot;</span><span class="p">,</span>
    <span class="s2">&quot;下雨天留客天留我不留&quot;</span><span class="p">,</span>
    <span class="s2">&quot;行路人等不得在此大小便&quot;</span><span class="p">,</span>
    <span class="s2">&quot;兒的生活好痛苦一點也沒有糧食多病少掙了很多錢&quot;</span><span class="p">,</span>
<span class="p">]</span>
<span class="n">ws2</span> <span class="o">=</span> <span class="n">ws_driver</span><span class="p">(</span><span class="n">text2</span><span class="p">)</span>
<span class="n">pos2</span> <span class="o">=</span> <span class="n">pos_driver</span><span class="p">(</span><span class="n">ws2</span><span class="p">)</span>
<span class="n">ner2</span> <span class="o">=</span> <span class="n">ner_driver</span><span class="p">(</span><span class="n">text2</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Tokenization: 100%|██████████| 5/5 [00:00&lt;00:00, 17848.10it/s]
Inference: 100%|██████████| 1/1 [00:00&lt;00:00, 41.78it/s]
Tokenization: 100%|██████████| 5/5 [00:00&lt;00:00, 19765.81it/s]
Inference: 100%|██████████| 1/1 [00:00&lt;00:00, 66.31it/s]
Tokenization: 100%|██████████| 5/5 [00:00&lt;00:00, 18094.50it/s]
Inference: 100%|██████████| 1/1 [00:00&lt;00:00, 59.80it/s]
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Show results</span>
<span class="k">for</span> <span class="n">sentence</span><span class="p">,</span> <span class="n">sentence_ws</span><span class="p">,</span> <span class="n">sentence_pos</span><span class="p">,</span> <span class="n">sentence_ner</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span>
        <span class="n">text2</span><span class="p">,</span> <span class="n">ws2</span><span class="p">,</span> <span class="n">pos2</span><span class="p">,</span> <span class="n">ner2</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">sentence</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">pack_ws_pos_sentece</span><span class="p">(</span><span class="n">sentence_ws</span><span class="p">,</span> <span class="n">sentence_pos</span><span class="p">))</span>
    <span class="k">for</span> <span class="n">entity</span> <span class="ow">in</span> <span class="n">sentence_ner</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">entity</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>女人沒有她男人甚麼也不是
女人(Na)　沒有(VJ)　她(Nh)　男人(Na)　甚麼(Nep)　也(D)　不(D)　是(SHI)

女人沒有了男人將會一無所有
女人(Na)　沒有(VJ)　了(Di)　男人(Na)　將(D)　會(D)　一無所有(VH)

下雨天留客天留我不留
下雨天(Nd)　留(VC)　客(Na)　天(Na)　留(VC)　我(Nh)　不(D)　留(VC)

行路人等不得在此大小便
行路人(Na)　等(Cab)　不得(D)　在(P)　此(Nep)　大小便(VA)

兒的生活好痛苦一點也沒有糧食多病少掙了很多錢
兒(Na)　的(DE)　生活(Na)　好(Dfa)　痛苦(VH)　一點(Neqa)　也(D)　沒有(VJ)　糧食(Na)　多(VH)　病(Na)　少(VH)　掙(VC)　了(Di)　很多(Neqa)　錢(Na)
</pre></div>
</div>
</div>
</div>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>It is still not clear to me how we can include user-defined dictionary in the <code class="docutils literal notranslate"><span class="pre">ckip-transformers</span></code>. This may be a problem to all deep-learning based segmenters I think.</p>
<p>However, I know that it is possible to use self-defined dictionary in the <code class="docutils literal notranslate"><span class="pre">ckiptagger</span></code>.</p>
<p>If you know where and how to incorporate self-defined dictionary in the <code class="docutils literal notranslate"><span class="pre">ckip-transformers</span></code>, please let me know. Thanks!</p>
</div>
</section>
<section id="other-modules-for-chinese-word-segmentation">
<h2>Other Modules for Chinese Word Segmentation<a class="headerlink" href="#other-modules-for-chinese-word-segmentation" title="Permalink to this headline">#</a></h2>
<ul class="simple">
<li><p>You can try other modules and check their segmentation results and qualities:</p>
<ul>
<li><p><a class="reference external" href="https://github.com/ckiplab/ckiptagger"><code class="docutils literal notranslate"><span class="pre">ckiptagger</span></code></a> (Probably the predecessor of <code class="docutils literal notranslate"><span class="pre">ckip-transformers</span></code>?)</p></li>
<li><p><a class="reference external" href="https://github.com/lancopku/pkuseg-python"><code class="docutils literal notranslate"><span class="pre">pkuseg</span></code></a></p></li>
<li><p><a class="reference external" href="https://github.com/hankcs/pyhanlp"><code class="docutils literal notranslate"><span class="pre">pyhanlp</span></code></a></p></li>
<li><p><a class="reference external" href="https://github.com/isnowfy/snownlp"><code class="docutils literal notranslate"><span class="pre">snownlp</span></code></a></p></li>
</ul>
</li>
<li><p>When you play with other segmenters, please note a few important issues for determining the segmenter for your project:</p>
<ul>
<li><p>Most of the segmenters were trained based on the simplified Chinese.</p></li>
<li><p>It is important to know if the segmenter allows users to add self-defined dictionary to improve segmentation performance.</p></li>
<li><p>The documentation of the tagsets (i.e., POS, NER) needs to be well-maintained so that users can easily utilize the segmentation results for later downstream projects.</p></li>
</ul>
</li>
</ul>
</section>
<section id="chinese-nlp-using-spacy">
<h2>Chinese NLP Using <code class="docutils literal notranslate"><span class="pre">spacy</span></code><a class="headerlink" href="#chinese-nlp-using-spacy" title="Permalink to this headline">#</a></h2>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">spacy</span> <span class="pre">3+</span></code> starts to support transformer-based NLP. Please make sure you have the most recent version of the module.</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ pip show spacy
</pre></div>
</div>
<ul class="simple">
<li><p>Documentation of <a class="reference external" href="https://spacy.io/usage#quickstart"><code class="docutils literal notranslate"><span class="pre">spacy</span></code></a></p></li>
</ul>
<ul class="simple">
<li><p>Installation steps:</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ conda activate python-notes
$ conda install -c conda-forge spacy
$ python -m spacy download zh_core_web_trf
$ python -m spacy download zh_core_web_sm
$ python -m spacy download en_core_web_trf
$ python -m spacy download en_core_web_sm
</pre></div>
</div>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">spacy</span></code> provides a good API to help users install the package. Please set up the relevant parameters according to the API and find your own installation codes.</p></li>
</ul>
<hr class="docutils" />
<p><img alt="" src="../_images/spacy-install.png" /></p>
<hr class="docutils" />
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">## Colab Only</span>
<span class="o">!</span>python<span class="w"> </span>-m<span class="w"> </span>spacy<span class="w"> </span>download<span class="w"> </span>zh_core_web_trf
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Collecting zh-core-web-trf==3.7.2
  Downloading https://github.com/explosion/spacy-models/releases/download/zh_core_web_trf-3.7.2/zh_core_web_trf-3.7.2-py3-none-any.whl (415.1 MB)
     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ <span class=" -Color -Color-Green">415.1/415.1 MB</span> <span class=" -Color -Color-Red">2.6 MB/s</span> eta <span class=" -Color -Color-Cyan">0:00:00</span>
?25hRequirement already satisfied: spacy&lt;3.8.0,&gt;=3.7.0 in /usr/local/lib/python3.10/dist-packages (from zh-core-web-trf==3.7.2) (3.7.4)
Collecting spacy-curated-transformers&lt;0.3.0,&gt;=0.2.0 (from zh-core-web-trf==3.7.2)
  Downloading spacy_curated_transformers-0.2.2-py2.py3-none-any.whl (236 kB)
     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ <span class=" -Color -Color-Green">236.3/236.3 kB</span> <span class=" -Color -Color-Red">2.1 MB/s</span> eta <span class=" -Color -Color-Cyan">0:00:00</span>
?25hCollecting spacy-pkuseg&lt;0.1.0,&gt;=0.0.27 (from zh-core-web-trf==3.7.2)
  Downloading spacy_pkuseg-0.0.33-cp310-cp310-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (2.5 MB)
     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ <span class=" -Color -Color-Green">2.5/2.5 MB</span> <span class=" -Color -Color-Red">18.7 MB/s</span> eta <span class=" -Color -Color-Cyan">0:00:00</span>
?25hRequirement already satisfied: spacy-legacy&lt;3.1.0,&gt;=3.0.11 in /usr/local/lib/python3.10/dist-packages (from spacy&lt;3.8.0,&gt;=3.7.0-&gt;zh-core-web-trf==3.7.2) (3.0.12)
Requirement already satisfied: spacy-loggers&lt;2.0.0,&gt;=1.0.0 in /usr/local/lib/python3.10/dist-packages (from spacy&lt;3.8.0,&gt;=3.7.0-&gt;zh-core-web-trf==3.7.2) (1.0.5)
Requirement already satisfied: murmurhash&lt;1.1.0,&gt;=0.28.0 in /usr/local/lib/python3.10/dist-packages (from spacy&lt;3.8.0,&gt;=3.7.0-&gt;zh-core-web-trf==3.7.2) (1.0.10)
Requirement already satisfied: cymem&lt;2.1.0,&gt;=2.0.2 in /usr/local/lib/python3.10/dist-packages (from spacy&lt;3.8.0,&gt;=3.7.0-&gt;zh-core-web-trf==3.7.2) (2.0.8)
Requirement already satisfied: preshed&lt;3.1.0,&gt;=3.0.2 in /usr/local/lib/python3.10/dist-packages (from spacy&lt;3.8.0,&gt;=3.7.0-&gt;zh-core-web-trf==3.7.2) (3.0.9)
Requirement already satisfied: thinc&lt;8.3.0,&gt;=8.2.2 in /usr/local/lib/python3.10/dist-packages (from spacy&lt;3.8.0,&gt;=3.7.0-&gt;zh-core-web-trf==3.7.2) (8.2.3)
Requirement already satisfied: wasabi&lt;1.2.0,&gt;=0.9.1 in /usr/local/lib/python3.10/dist-packages (from spacy&lt;3.8.0,&gt;=3.7.0-&gt;zh-core-web-trf==3.7.2) (1.1.2)
Requirement already satisfied: srsly&lt;3.0.0,&gt;=2.4.3 in /usr/local/lib/python3.10/dist-packages (from spacy&lt;3.8.0,&gt;=3.7.0-&gt;zh-core-web-trf==3.7.2) (2.4.8)
Requirement already satisfied: catalogue&lt;2.1.0,&gt;=2.0.6 in /usr/local/lib/python3.10/dist-packages (from spacy&lt;3.8.0,&gt;=3.7.0-&gt;zh-core-web-trf==3.7.2) (2.0.10)
Requirement already satisfied: weasel&lt;0.4.0,&gt;=0.1.0 in /usr/local/lib/python3.10/dist-packages (from spacy&lt;3.8.0,&gt;=3.7.0-&gt;zh-core-web-trf==3.7.2) (0.3.4)
Requirement already satisfied: typer&lt;0.10.0,&gt;=0.3.0 in /usr/local/lib/python3.10/dist-packages (from spacy&lt;3.8.0,&gt;=3.7.0-&gt;zh-core-web-trf==3.7.2) (0.9.0)
Requirement already satisfied: smart-open&lt;7.0.0,&gt;=5.2.1 in /usr/local/lib/python3.10/dist-packages (from spacy&lt;3.8.0,&gt;=3.7.0-&gt;zh-core-web-trf==3.7.2) (6.4.0)
Requirement already satisfied: tqdm&lt;5.0.0,&gt;=4.38.0 in /usr/local/lib/python3.10/dist-packages (from spacy&lt;3.8.0,&gt;=3.7.0-&gt;zh-core-web-trf==3.7.2) (4.66.2)
Requirement already satisfied: requests&lt;3.0.0,&gt;=2.13.0 in /usr/local/lib/python3.10/dist-packages (from spacy&lt;3.8.0,&gt;=3.7.0-&gt;zh-core-web-trf==3.7.2) (2.31.0)
Requirement already satisfied: pydantic!=1.8,!=1.8.1,&lt;3.0.0,&gt;=1.7.4 in /usr/local/lib/python3.10/dist-packages (from spacy&lt;3.8.0,&gt;=3.7.0-&gt;zh-core-web-trf==3.7.2) (2.6.1)
Requirement already satisfied: jinja2 in /usr/local/lib/python3.10/dist-packages (from spacy&lt;3.8.0,&gt;=3.7.0-&gt;zh-core-web-trf==3.7.2) (3.1.3)
Requirement already satisfied: setuptools in /usr/local/lib/python3.10/dist-packages (from spacy&lt;3.8.0,&gt;=3.7.0-&gt;zh-core-web-trf==3.7.2) (67.7.2)
Requirement already satisfied: packaging&gt;=20.0 in /usr/local/lib/python3.10/dist-packages (from spacy&lt;3.8.0,&gt;=3.7.0-&gt;zh-core-web-trf==3.7.2) (23.2)
Requirement already satisfied: langcodes&lt;4.0.0,&gt;=3.2.0 in /usr/local/lib/python3.10/dist-packages (from spacy&lt;3.8.0,&gt;=3.7.0-&gt;zh-core-web-trf==3.7.2) (3.3.0)
Requirement already satisfied: numpy&gt;=1.19.0 in /usr/local/lib/python3.10/dist-packages (from spacy&lt;3.8.0,&gt;=3.7.0-&gt;zh-core-web-trf==3.7.2) (1.25.2)
Collecting curated-transformers&lt;0.2.0,&gt;=0.1.0 (from spacy-curated-transformers&lt;0.3.0,&gt;=0.2.0-&gt;zh-core-web-trf==3.7.2)
  Downloading curated_transformers-0.1.1-py2.py3-none-any.whl (25 kB)
Collecting curated-tokenizers&lt;0.1.0,&gt;=0.0.9 (from spacy-curated-transformers&lt;0.3.0,&gt;=0.2.0-&gt;zh-core-web-trf==3.7.2)
  Downloading curated_tokenizers-0.0.9-cp310-cp310-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (731 kB)
     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ <span class=" -Color -Color-Green">731.6/731.6 kB</span> <span class=" -Color -Color-Red">63.9 MB/s</span> eta <span class=" -Color -Color-Cyan">0:00:00</span>
?25hRequirement already satisfied: torch&gt;=1.12.0 in /usr/local/lib/python3.10/dist-packages (from spacy-curated-transformers&lt;0.3.0,&gt;=0.2.0-&gt;zh-core-web-trf==3.7.2) (2.1.0+cu121)
Requirement already satisfied: regex&gt;=2022 in /usr/local/lib/python3.10/dist-packages (from curated-tokenizers&lt;0.1.0,&gt;=0.0.9-&gt;spacy-curated-transformers&lt;0.3.0,&gt;=0.2.0-&gt;zh-core-web-trf==3.7.2) (2023.12.25)
Requirement already satisfied: annotated-types&gt;=0.4.0 in /usr/local/lib/python3.10/dist-packages (from pydantic!=1.8,!=1.8.1,&lt;3.0.0,&gt;=1.7.4-&gt;spacy&lt;3.8.0,&gt;=3.7.0-&gt;zh-core-web-trf==3.7.2) (0.6.0)
Requirement already satisfied: pydantic-core==2.16.2 in /usr/local/lib/python3.10/dist-packages (from pydantic!=1.8,!=1.8.1,&lt;3.0.0,&gt;=1.7.4-&gt;spacy&lt;3.8.0,&gt;=3.7.0-&gt;zh-core-web-trf==3.7.2) (2.16.2)
Requirement already satisfied: typing-extensions&gt;=4.6.1 in /usr/local/lib/python3.10/dist-packages (from pydantic!=1.8,!=1.8.1,&lt;3.0.0,&gt;=1.7.4-&gt;spacy&lt;3.8.0,&gt;=3.7.0-&gt;zh-core-web-trf==3.7.2) (4.9.0)
Requirement already satisfied: charset-normalizer&lt;4,&gt;=2 in /usr/local/lib/python3.10/dist-packages (from requests&lt;3.0.0,&gt;=2.13.0-&gt;spacy&lt;3.8.0,&gt;=3.7.0-&gt;zh-core-web-trf==3.7.2) (3.3.2)
Requirement already satisfied: idna&lt;4,&gt;=2.5 in /usr/local/lib/python3.10/dist-packages (from requests&lt;3.0.0,&gt;=2.13.0-&gt;spacy&lt;3.8.0,&gt;=3.7.0-&gt;zh-core-web-trf==3.7.2) (3.6)
Requirement already satisfied: urllib3&lt;3,&gt;=1.21.1 in /usr/local/lib/python3.10/dist-packages (from requests&lt;3.0.0,&gt;=2.13.0-&gt;spacy&lt;3.8.0,&gt;=3.7.0-&gt;zh-core-web-trf==3.7.2) (2.0.7)
Requirement already satisfied: certifi&gt;=2017.4.17 in /usr/local/lib/python3.10/dist-packages (from requests&lt;3.0.0,&gt;=2.13.0-&gt;spacy&lt;3.8.0,&gt;=3.7.0-&gt;zh-core-web-trf==3.7.2) (2024.2.2)
Requirement already satisfied: blis&lt;0.8.0,&gt;=0.7.8 in /usr/local/lib/python3.10/dist-packages (from thinc&lt;8.3.0,&gt;=8.2.2-&gt;spacy&lt;3.8.0,&gt;=3.7.0-&gt;zh-core-web-trf==3.7.2) (0.7.11)
Requirement already satisfied: confection&lt;1.0.0,&gt;=0.0.1 in /usr/local/lib/python3.10/dist-packages (from thinc&lt;8.3.0,&gt;=8.2.2-&gt;spacy&lt;3.8.0,&gt;=3.7.0-&gt;zh-core-web-trf==3.7.2) (0.1.4)
Requirement already satisfied: filelock in /usr/local/lib/python3.10/dist-packages (from torch&gt;=1.12.0-&gt;spacy-curated-transformers&lt;0.3.0,&gt;=0.2.0-&gt;zh-core-web-trf==3.7.2) (3.13.1)
Requirement already satisfied: sympy in /usr/local/lib/python3.10/dist-packages (from torch&gt;=1.12.0-&gt;spacy-curated-transformers&lt;0.3.0,&gt;=0.2.0-&gt;zh-core-web-trf==3.7.2) (1.12)
Requirement already satisfied: networkx in /usr/local/lib/python3.10/dist-packages (from torch&gt;=1.12.0-&gt;spacy-curated-transformers&lt;0.3.0,&gt;=0.2.0-&gt;zh-core-web-trf==3.7.2) (3.2.1)
Requirement already satisfied: fsspec in /usr/local/lib/python3.10/dist-packages (from torch&gt;=1.12.0-&gt;spacy-curated-transformers&lt;0.3.0,&gt;=0.2.0-&gt;zh-core-web-trf==3.7.2) (2023.6.0)
Requirement already satisfied: triton==2.1.0 in /usr/local/lib/python3.10/dist-packages (from torch&gt;=1.12.0-&gt;spacy-curated-transformers&lt;0.3.0,&gt;=0.2.0-&gt;zh-core-web-trf==3.7.2) (2.1.0)
Requirement already satisfied: click&lt;9.0.0,&gt;=7.1.1 in /usr/local/lib/python3.10/dist-packages (from typer&lt;0.10.0,&gt;=0.3.0-&gt;spacy&lt;3.8.0,&gt;=3.7.0-&gt;zh-core-web-trf==3.7.2) (8.1.7)
Requirement already satisfied: cloudpathlib&lt;0.17.0,&gt;=0.7.0 in /usr/local/lib/python3.10/dist-packages (from weasel&lt;0.4.0,&gt;=0.1.0-&gt;spacy&lt;3.8.0,&gt;=3.7.0-&gt;zh-core-web-trf==3.7.2) (0.16.0)
Requirement already satisfied: MarkupSafe&gt;=2.0 in /usr/local/lib/python3.10/dist-packages (from jinja2-&gt;spacy&lt;3.8.0,&gt;=3.7.0-&gt;zh-core-web-trf==3.7.2) (2.1.5)
Requirement already satisfied: mpmath&gt;=0.19 in /usr/local/lib/python3.10/dist-packages (from sympy-&gt;torch&gt;=1.12.0-&gt;spacy-curated-transformers&lt;0.3.0,&gt;=0.2.0-&gt;zh-core-web-trf==3.7.2) (1.3.0)
Installing collected packages: curated-tokenizers, spacy-pkuseg, curated-transformers, spacy-curated-transformers, zh-core-web-trf
Successfully installed curated-tokenizers-0.0.9 curated-transformers-0.1.1 spacy-curated-transformers-0.2.2 spacy-pkuseg-0.0.33 zh-core-web-trf-3.7.2
<span class=" -Color -Color-C2">✔ Download and installation successful</span>
You can now load the package via spacy.load(&#39;zh_core_web_trf&#39;)
<span class=" -Color -Color-C3">⚠ Restart to reload dependencies</span>
If you are in a Jupyter or Colab notebook, you may need to restart Python in
order to load all the package&#39;s dependencies. You can do this by selecting the
&#39;Restart kernel&#39; or &#39;Restart runtime&#39; option.
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">spacy</span>
<span class="kn">from</span> <span class="nn">spacy</span> <span class="kn">import</span> <span class="n">displacy</span>
<span class="c1"># load language model</span>
<span class="n">nlp_zh</span> <span class="o">=</span> <span class="n">spacy</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="s1">&#39;zh_core_web_trf&#39;</span><span class="p">)</span>  <span class="c1">## disable=[&quot;parser&quot;]</span>
<span class="c1"># parse text</span>
<span class="n">doc</span> <span class="o">=</span> <span class="n">nlp_zh</span><span class="p">(</span><span class="s1">&#39;這是一個中文的句子&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>For more information on POS tags, see spaCy <a class="reference external" href="https://spacy.io/api/annotation#pos-tagging">POS tag scheme documentation</a>.</p>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># parts of speech tagging</span>
<span class="k">for</span> <span class="n">token</span> <span class="ow">in</span> <span class="n">doc</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(((</span>
        <span class="n">token</span><span class="o">.</span><span class="n">text</span><span class="p">,</span>
        <span class="n">token</span><span class="o">.</span><span class="n">pos_</span><span class="p">,</span>
        <span class="n">token</span><span class="o">.</span><span class="n">tag_</span><span class="p">,</span>
        <span class="n">token</span><span class="o">.</span><span class="n">dep_</span><span class="p">,</span>
        <span class="n">token</span><span class="o">.</span><span class="n">is_alpha</span><span class="p">,</span>
        <span class="n">token</span><span class="o">.</span><span class="n">is_stop</span><span class="p">,</span>
    <span class="p">)))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>(&#39;這&#39;, &#39;PRON&#39;, &#39;PN&#39;, &#39;nsubj&#39;, True, False)
(&#39;是&#39;, &#39;VERB&#39;, &#39;VC&#39;, &#39;cop&#39;, True, True)
(&#39;一&#39;, &#39;NUM&#39;, &#39;CD&#39;, &#39;nummod&#39;, True, True)
(&#39;個&#39;, &#39;NUM&#39;, &#39;M&#39;, &#39;mark:clf&#39;, True, False)
(&#39;中文&#39;, &#39;NOUN&#39;, &#39;NN&#39;, &#39;nmod:assmod&#39;, True, False)
(&#39;的&#39;, &#39;PART&#39;, &#39;DEG&#39;, &#39;case&#39;, True, True)
(&#39;句子&#39;, &#39;NOUN&#39;, &#39;NN&#39;, &#39;ROOT&#39;, True, False)
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="s1">&#39; | &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="n">token</span><span class="o">.</span><span class="n">text</span> <span class="o">+</span> <span class="s2">&quot;_&quot;</span> <span class="o">+</span> <span class="n">token</span><span class="o">.</span><span class="n">tag_</span> <span class="k">for</span> <span class="n">token</span> <span class="ow">in</span> <span class="n">doc</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&#39;這_PN | 是_VC | 一_CD | 個_M | 中文_NN | 的_DEG | 句子_NN&#39;
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">## Check meaning of a POS tag</span>
<span class="n">spacy</span><span class="o">.</span><span class="n">explain</span><span class="p">(</span><span class="s1">&#39;NN&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&#39;noun, singular or mass&#39;
</pre></div>
</div>
</div>
</div>
<section id="visualizing-linguistic-features">
<h3>Visualizing linguistic features<a class="headerlink" href="#visualizing-linguistic-features" title="Permalink to this headline">#</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Visualize</span>
<span class="n">displacy</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="n">doc</span><span class="p">,</span> <span class="n">style</span><span class="o">=</span><span class="s2">&quot;dep&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span class="tex2jax_ignore"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:lang="zh" id="dd37b9ec8a6548f984948a6348a80b8b-0" class="displacy" width="1275" height="574.5" direction="ltr" style="max-width: none; height: 574.5px; color: #000000; background: #ffffff; font-family: Arial; direction: ltr">
<text class="displacy-token" fill="currentColor" text-anchor="middle" y="484.5">
    <tspan class="displacy-word" fill="currentColor" x="50">這</tspan>
    <tspan class="displacy-tag" dy="2em" fill="currentColor" x="50">PRON</tspan>
</text>

<text class="displacy-token" fill="currentColor" text-anchor="middle" y="484.5">
    <tspan class="displacy-word" fill="currentColor" x="225">是</tspan>
    <tspan class="displacy-tag" dy="2em" fill="currentColor" x="225">VERB</tspan>
</text>

<text class="displacy-token" fill="currentColor" text-anchor="middle" y="484.5">
    <tspan class="displacy-word" fill="currentColor" x="400">一</tspan>
    <tspan class="displacy-tag" dy="2em" fill="currentColor" x="400">NUM</tspan>
</text>

<text class="displacy-token" fill="currentColor" text-anchor="middle" y="484.5">
    <tspan class="displacy-word" fill="currentColor" x="575">個</tspan>
    <tspan class="displacy-tag" dy="2em" fill="currentColor" x="575">NUM</tspan>
</text>

<text class="displacy-token" fill="currentColor" text-anchor="middle" y="484.5">
    <tspan class="displacy-word" fill="currentColor" x="750">中文</tspan>
    <tspan class="displacy-tag" dy="2em" fill="currentColor" x="750">NOUN</tspan>
</text>

<text class="displacy-token" fill="currentColor" text-anchor="middle" y="484.5">
    <tspan class="displacy-word" fill="currentColor" x="925">的</tspan>
    <tspan class="displacy-tag" dy="2em" fill="currentColor" x="925">PART</tspan>
</text>

<text class="displacy-token" fill="currentColor" text-anchor="middle" y="484.5">
    <tspan class="displacy-word" fill="currentColor" x="1100">句子</tspan>
    <tspan class="displacy-tag" dy="2em" fill="currentColor" x="1100">NOUN</tspan>
</text>

<g class="displacy-arrow">
    <path class="displacy-arc" id="arrow-dd37b9ec8a6548f984948a6348a80b8b-0-0" stroke-width="2px" d="M70,439.5 C70,2.0 1100.0,2.0 1100.0,439.5" fill="none" stroke="currentColor"/>
    <text dy="1.25em" style="font-size: 0.8em; letter-spacing: 1px">
        <textPath xlink:href="#arrow-dd37b9ec8a6548f984948a6348a80b8b-0-0" class="displacy-label" startOffset="50%" side="left" fill="currentColor" text-anchor="middle">nsubj</textPath>
    </text>
    <path class="displacy-arrowhead" d="M70,441.5 L62,429.5 78,429.5" fill="currentColor"/>
</g>

<g class="displacy-arrow">
    <path class="displacy-arc" id="arrow-dd37b9ec8a6548f984948a6348a80b8b-0-1" stroke-width="2px" d="M245,439.5 C245,89.5 1095.0,89.5 1095.0,439.5" fill="none" stroke="currentColor"/>
    <text dy="1.25em" style="font-size: 0.8em; letter-spacing: 1px">
        <textPath xlink:href="#arrow-dd37b9ec8a6548f984948a6348a80b8b-0-1" class="displacy-label" startOffset="50%" side="left" fill="currentColor" text-anchor="middle">cop</textPath>
    </text>
    <path class="displacy-arrowhead" d="M245,441.5 L237,429.5 253,429.5" fill="currentColor"/>
</g>

<g class="displacy-arrow">
    <path class="displacy-arc" id="arrow-dd37b9ec8a6548f984948a6348a80b8b-0-2" stroke-width="2px" d="M420,439.5 C420,177.0 1090.0,177.0 1090.0,439.5" fill="none" stroke="currentColor"/>
    <text dy="1.25em" style="font-size: 0.8em; letter-spacing: 1px">
        <textPath xlink:href="#arrow-dd37b9ec8a6548f984948a6348a80b8b-0-2" class="displacy-label" startOffset="50%" side="left" fill="currentColor" text-anchor="middle">nummod</textPath>
    </text>
    <path class="displacy-arrowhead" d="M420,441.5 L412,429.5 428,429.5" fill="currentColor"/>
</g>

<g class="displacy-arrow">
    <path class="displacy-arc" id="arrow-dd37b9ec8a6548f984948a6348a80b8b-0-3" stroke-width="2px" d="M420,439.5 C420,352.0 555.0,352.0 555.0,439.5" fill="none" stroke="currentColor"/>
    <text dy="1.25em" style="font-size: 0.8em; letter-spacing: 1px">
        <textPath xlink:href="#arrow-dd37b9ec8a6548f984948a6348a80b8b-0-3" class="displacy-label" startOffset="50%" side="left" fill="currentColor" text-anchor="middle">mark:clf</textPath>
    </text>
    <path class="displacy-arrowhead" d="M555.0,441.5 L563.0,429.5 547.0,429.5" fill="currentColor"/>
</g>

<g class="displacy-arrow">
    <path class="displacy-arc" id="arrow-dd37b9ec8a6548f984948a6348a80b8b-0-4" stroke-width="2px" d="M770,439.5 C770,264.5 1085.0,264.5 1085.0,439.5" fill="none" stroke="currentColor"/>
    <text dy="1.25em" style="font-size: 0.8em; letter-spacing: 1px">
        <textPath xlink:href="#arrow-dd37b9ec8a6548f984948a6348a80b8b-0-4" class="displacy-label" startOffset="50%" side="left" fill="currentColor" text-anchor="middle">nmod:assmod</textPath>
    </text>
    <path class="displacy-arrowhead" d="M770,441.5 L762,429.5 778,429.5" fill="currentColor"/>
</g>

<g class="displacy-arrow">
    <path class="displacy-arc" id="arrow-dd37b9ec8a6548f984948a6348a80b8b-0-5" stroke-width="2px" d="M770,439.5 C770,352.0 905.0,352.0 905.0,439.5" fill="none" stroke="currentColor"/>
    <text dy="1.25em" style="font-size: 0.8em; letter-spacing: 1px">
        <textPath xlink:href="#arrow-dd37b9ec8a6548f984948a6348a80b8b-0-5" class="displacy-label" startOffset="50%" side="left" fill="currentColor" text-anchor="middle">case</textPath>
    </text>
    <path class="displacy-arrowhead" d="M905.0,441.5 L913.0,429.5 897.0,429.5" fill="currentColor"/>
</g>
</svg></span></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">options</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;compact&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
    <span class="s2">&quot;bg&quot;</span><span class="p">:</span> <span class="s2">&quot;#09a3d5&quot;</span><span class="p">,</span>
    <span class="s2">&quot;color&quot;</span><span class="p">:</span> <span class="s2">&quot;white&quot;</span><span class="p">,</span>
    <span class="s2">&quot;font&quot;</span><span class="p">:</span> <span class="s2">&quot;Source Sans Pro&quot;</span><span class="p">,</span>
    <span class="s2">&quot;distance&quot;</span><span class="p">:</span> <span class="mi">120</span>
<span class="p">}</span>
<span class="n">displacy</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="n">doc</span><span class="p">,</span> <span class="n">style</span><span class="o">=</span><span class="s2">&quot;dep&quot;</span><span class="p">,</span> <span class="n">options</span><span class="o">=</span><span class="n">options</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span class="tex2jax_ignore"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:lang="zh" id="0a1aa52dea2e4721b9c607ba7a47b9a6-0" class="displacy" width="890" height="437.0" direction="ltr" style="max-width: none; height: 437.0px; color: white; background: #09a3d5; font-family: Source Sans Pro; direction: ltr">
<text class="displacy-token" fill="currentColor" text-anchor="middle" y="347.0">
    <tspan class="displacy-word" fill="currentColor" x="50">這</tspan>
    <tspan class="displacy-tag" dy="2em" fill="currentColor" x="50">PRON</tspan>
</text>

<text class="displacy-token" fill="currentColor" text-anchor="middle" y="347.0">
    <tspan class="displacy-word" fill="currentColor" x="170">是</tspan>
    <tspan class="displacy-tag" dy="2em" fill="currentColor" x="170">VERB</tspan>
</text>

<text class="displacy-token" fill="currentColor" text-anchor="middle" y="347.0">
    <tspan class="displacy-word" fill="currentColor" x="290">一</tspan>
    <tspan class="displacy-tag" dy="2em" fill="currentColor" x="290">NUM</tspan>
</text>

<text class="displacy-token" fill="currentColor" text-anchor="middle" y="347.0">
    <tspan class="displacy-word" fill="currentColor" x="410">個</tspan>
    <tspan class="displacy-tag" dy="2em" fill="currentColor" x="410">NUM</tspan>
</text>

<text class="displacy-token" fill="currentColor" text-anchor="middle" y="347.0">
    <tspan class="displacy-word" fill="currentColor" x="530">中文</tspan>
    <tspan class="displacy-tag" dy="2em" fill="currentColor" x="530">NOUN</tspan>
</text>

<text class="displacy-token" fill="currentColor" text-anchor="middle" y="347.0">
    <tspan class="displacy-word" fill="currentColor" x="650">的</tspan>
    <tspan class="displacy-tag" dy="2em" fill="currentColor" x="650">PART</tspan>
</text>

<text class="displacy-token" fill="currentColor" text-anchor="middle" y="347.0">
    <tspan class="displacy-word" fill="currentColor" x="770">句子</tspan>
    <tspan class="displacy-tag" dy="2em" fill="currentColor" x="770">NOUN</tspan>
</text>

<g class="displacy-arrow">
    <path class="displacy-arc" id="arrow-0a1aa52dea2e4721b9c607ba7a47b9a6-0-0" stroke-width="2px" d="M62,302.0 62,202.0 770.0,202.0 770.0,302.0" fill="none" stroke="currentColor"/>
    <text dy="1.25em" style="font-size: 0.8em; letter-spacing: 1px">
        <textPath xlink:href="#arrow-0a1aa52dea2e4721b9c607ba7a47b9a6-0-0" class="displacy-label" startOffset="50%" side="left" fill="currentColor" text-anchor="middle">nsubj</textPath>
    </text>
    <path class="displacy-arrowhead" d="M62,304.0 L58,296.0 66,296.0" fill="currentColor"/>
</g>

<g class="displacy-arrow">
    <path class="displacy-arc" id="arrow-0a1aa52dea2e4721b9c607ba7a47b9a6-0-1" stroke-width="2px" d="M182,302.0 182,222.0 767.0,222.0 767.0,302.0" fill="none" stroke="currentColor"/>
    <text dy="1.25em" style="font-size: 0.8em; letter-spacing: 1px">
        <textPath xlink:href="#arrow-0a1aa52dea2e4721b9c607ba7a47b9a6-0-1" class="displacy-label" startOffset="50%" side="left" fill="currentColor" text-anchor="middle">cop</textPath>
    </text>
    <path class="displacy-arrowhead" d="M182,304.0 L178,296.0 186,296.0" fill="currentColor"/>
</g>

<g class="displacy-arrow">
    <path class="displacy-arc" id="arrow-0a1aa52dea2e4721b9c607ba7a47b9a6-0-2" stroke-width="2px" d="M302,302.0 302,242.0 764.0,242.0 764.0,302.0" fill="none" stroke="currentColor"/>
    <text dy="1.25em" style="font-size: 0.8em; letter-spacing: 1px">
        <textPath xlink:href="#arrow-0a1aa52dea2e4721b9c607ba7a47b9a6-0-2" class="displacy-label" startOffset="50%" side="left" fill="currentColor" text-anchor="middle">nummod</textPath>
    </text>
    <path class="displacy-arrowhead" d="M302,304.0 L298,296.0 306,296.0" fill="currentColor"/>
</g>

<g class="displacy-arrow">
    <path class="displacy-arc" id="arrow-0a1aa52dea2e4721b9c607ba7a47b9a6-0-3" stroke-width="2px" d="M302,302.0 302,282.0 398.0,282.0 398.0,302.0" fill="none" stroke="currentColor"/>
    <text dy="1.25em" style="font-size: 0.8em; letter-spacing: 1px">
        <textPath xlink:href="#arrow-0a1aa52dea2e4721b9c607ba7a47b9a6-0-3" class="displacy-label" startOffset="50%" side="left" fill="currentColor" text-anchor="middle">mark:clf</textPath>
    </text>
    <path class="displacy-arrowhead" d="M398.0,304.0 L402.0,296.0 394.0,296.0" fill="currentColor"/>
</g>

<g class="displacy-arrow">
    <path class="displacy-arc" id="arrow-0a1aa52dea2e4721b9c607ba7a47b9a6-0-4" stroke-width="2px" d="M542,302.0 542,262.0 761.0,262.0 761.0,302.0" fill="none" stroke="currentColor"/>
    <text dy="1.25em" style="font-size: 0.8em; letter-spacing: 1px">
        <textPath xlink:href="#arrow-0a1aa52dea2e4721b9c607ba7a47b9a6-0-4" class="displacy-label" startOffset="50%" side="left" fill="currentColor" text-anchor="middle">nmod:assmod</textPath>
    </text>
    <path class="displacy-arrowhead" d="M542,304.0 L538,296.0 546,296.0" fill="currentColor"/>
</g>

<g class="displacy-arrow">
    <path class="displacy-arc" id="arrow-0a1aa52dea2e4721b9c607ba7a47b9a6-0-5" stroke-width="2px" d="M542,302.0 542,282.0 638.0,282.0 638.0,302.0" fill="none" stroke="currentColor"/>
    <text dy="1.25em" style="font-size: 0.8em; letter-spacing: 1px">
        <textPath xlink:href="#arrow-0a1aa52dea2e4721b9c607ba7a47b9a6-0-5" class="displacy-label" startOffset="50%" side="left" fill="currentColor" text-anchor="middle">case</textPath>
    </text>
    <path class="displacy-arrowhead" d="M638.0,304.0 L642.0,296.0 634.0,296.0" fill="currentColor"/>
</g>
</svg></span></div></div>
</div>
<ul class="simple">
<li><p>To process multiple documents of a large corpus, it would be more efficient to work on them on batches of texts.</p></li>
<li><p>spaCy’s <code class="docutils literal notranslate"><span class="pre">nlp.pipe()</span></code> method takes an <code class="docutils literal notranslate"><span class="pre">iterable</span></code> of texts and yields processed <code class="docutils literal notranslate"><span class="pre">Doc</span></code> objects. (That is, <code class="docutils literal notranslate"><span class="pre">nlp.pipe()</span></code> returns a <code class="docutils literal notranslate"><span class="pre">generator</span></code>.)</p></li>
<li><p>Use the <code class="docutils literal notranslate"><span class="pre">disable</span></code> keyword argument to disable components we don’t need – either when loading a pipeline, or during processing with <code class="docutils literal notranslate"><span class="pre">nlp.pipe</span></code>. This is more efficient in computing.</p></li>
<li><p>Please read spaCy’s documentation on <a class="reference external" href="https://spacy.io/usage/processing-pipelines#processing">preprocessing</a>.</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">doc2</span> <span class="o">=</span> <span class="n">nlp_zh</span><span class="o">.</span><span class="n">pipe</span><span class="p">(</span><span class="n">text</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">d</span> <span class="ow">in</span> <span class="n">doc2</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39; | &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="n">token</span><span class="o">.</span><span class="n">text</span> <span class="o">+</span> <span class="s2">&quot;_&quot;</span> <span class="o">+</span> <span class="n">token</span><span class="o">.</span><span class="n">tag_</span> <span class="k">for</span> <span class="n">token</span> <span class="ow">in</span> <span class="n">d</span><span class="p">])</span> <span class="o">+</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>高速_JJ | 公路_NN | 局說_NN | ，_PU | 目前_NT | 在_P | 國道_NN | 3_OD | 號_NN | 北向_NN | 水上_NN | 系統_NN | 至_CC | 中埔_NR | 路段_NN | 車多_NN | 壅塞_VA | ，_PU | 已_AD | 回_VV | 堵約_VV | 3_CD | 公里_M | 。_PU | 另外_AD | ，_PU | 國道_NN | 1_OD | 號_NN | 北向_VV | 仁德_NR | 至_CC | 永康_NR | 路段_NN | 路段_NN | ，_PU | 已_AD | 回_VV | 堵約_VV | 有_VE | 7_CD | 公里_M | 。_PU | 建議_VV | 駕駛人_NN | 提前_AD | 避開_VV | 壅塞_JJ | 路段_NN | 改道_VV | 行駛_NN | ，_PU | 行經_VV | 車_NN | 多_VA | 路段_NN | 請_VV | 保持_VV | 行車_NN | 安全_JJ | 距離_NN | ，_PU | 小心_AD | 行駛_VV | 。_PU

國道_NN | 車多_NN | 壅塞_JJ | 路段_NN | 還_AD | 有_VE | 國_NN | 1內湖_NR | -_PU | 五_NR | 堵北_NR | 向_P | 路段_NN | 、_PU | 楊梅_NR | -_PU | 新竹_NR | 南向_JJ | 路段_NN | ；_PU | 國3三_NR | 鶯_NR | -_PU | 關西_NR | 服務_NN | 區南_NN | 向_P | 路段_NN | 、_PU | 快官_NN | -_PU | 霧峰_NR | 南向_NN | 路段_NN | 、_PU | 水上_NR | 系統_NN | -_PU | 中_NR | 埔北_NR | 向_P | 路段_NN | ；_PU | 國6_NN | 霧峰_NR | 系統_NN | -_PU | 東草_NR | 屯東_NR | 向_P | 路段_NN | 、_PU | 國10_NN | 燕巢_NR | -_PU | 燕巢_NR | 系_NN | 統東_NN | 向_P | 路段_NN | 。_PU
</pre></div>
</div>
</div>
</div>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>Please read the <a class="reference external" href="https://spacy.io/usage/linguistic-features">documentation of <code class="docutils literal notranslate"><span class="pre">spacy</span></code></a> very carefully for additional ways to extract other useful linguistic properties.</p>
<p>You may need that for the assignments.</p>
</div>
</section>
</section>
<section id="conclusion">
<h2>Conclusion<a class="headerlink" href="#conclusion" title="Permalink to this headline">#</a></h2>
<ul class="simple">
<li><p>Different segmenters have very different behaviors.</p></li>
<li><p>The choice of a proper segmenter may boil down to the following crucial questions:</p>
<ul>
<li><p>How do we evaluate the segmenter’s performance?</p></li>
<li><p>What is the objective of getting the word boundaries?</p></li>
<li><p>What is a word in Chinese?</p></li>
</ul>
</li>
</ul>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python-notes-2023",
            path: "./nlp"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python-notes-2023'</script>

                </article>
              

              
              
                <footer class="bd-footer-article">
                  
<div class="footer-article-items footer-article__inner">
  
    <div class="footer-article-item"><!-- Previous / next buttons -->
<div class="prev-next-area">
    <a class="left-prev"
       href="text-enrichment.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Text Enrichment</p>
      </div>
    </a>
    <a class="right-next"
       href="google-colab.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Google Colab</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div></div>
  
</div>

                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">

  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#segmentation-using-jieba">Segmentation using <code class="docutils literal notranslate"><span class="pre">jieba</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#segmentation-using-ckip-transformer">Segmentation using CKIP Transformer</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#challenges-of-word-segmentation">Challenges of Word Segmentation</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#other-modules-for-chinese-word-segmentation">Other Modules for Chinese Word Segmentation</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#chinese-nlp-using-spacy">Chinese NLP Using <code class="docutils literal notranslate"><span class="pre">spacy</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#visualizing-linguistic-features">Visualizing linguistic features</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#conclusion">Conclusion</a></li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By Alvin Cheng-Hsien Chen
</p>

  </div>
  
  <div class="footer-item">
    
  <p class="copyright">
    
      © Copyright 2023 Alvin Chen.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/bootstrap.js?digest=e353d410970836974a52"></script>
<script src="../_static/scripts/pydata-sphinx-theme.js?digest=e353d410970836974a52"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>